{
  "master": {
    "tasks": [
      {
        "id": "9",
        "title": "Create CoVe skill directory structure and SKILL.md entry point",
        "description": "Set up the CoVe skill directory at `.claude/skills/cove/` (via `.github/templates/claude/skills/cove/`) and create the SKILL.md entry point file with proper YAML frontmatter and skill overview.",
        "details": "Create the skill directory structure following existing patterns in `.github/templates/claude/skills/`.\n\n**File: `.github/templates/claude/skills/cove/SKILL.md`**\n\nYAML frontmatter structure:\n```yaml\n---\nname: cove\ndescription: Apply Chain-of-Verification (CoVe) prompting to improve response accuracy through self-verification. Use for complex questions requiring fact-checking, technical accuracy, or multi-step reasoning.\n---\n```\n\nContent requirements:\n1. Brief explanation of CoVe purpose (1-2 paragraphs)\n2. When to use this skill (bullet list):\n   - Complex factual questions\n   - Technical specifications and API behavior\n   - Multi-step reasoning chains\n   - Code generation requiring accuracy verification\n3. Reference to `cove-process.md` for the detailed workflow\n4. Note about invocation via `/cove` command\n\nFollow the concise pattern from `development-guidelines/SKILL.md` - keep entry point brief, details go in process file.",
        "testStrategy": "1. Verify directory `.github/templates/claude/skills/cove/` exists\n2. Verify `SKILL.md` contains valid YAML frontmatter with `name: cove`\n3. Verify description mentions accuracy, verification, and complex questions\n4. Verify file references `cove-process.md`\n5. Check file follows existing skill format conventions (compare with `analysis-process/SKILL.md`)",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Create CoVe skill directory structure",
            "description": "Create the `.github/templates/claude/skills/cove/` directory to house the CoVe skill files, following the existing skill directory pattern in the templates folder.",
            "dependencies": [],
            "details": "Create the directory structure at `.github/templates/claude/skills/cove/`. This follows the existing pattern where each skill has its own subdirectory under the skills folder (e.g., `development-guidelines/`, `analysis-process/`, `testing-process/`). The directory should be created empty initially, ready to receive the SKILL.md and cove-process.md files in subsequent steps. Verify the directory exists and is at the correct location relative to other skill directories.\n<info added on 2026-02-01T15:06:19.899Z>\nI'll analyze the codebase to understand the project structure and then provide the appropriate update for subtask 9.1.Based on my analysis of the codebase structure and the design documents, here's the new information that should be appended to subtask 9.1:\n\nReference the complete CoVe design specification at docs/cove/design.md for architectural details including the 4-step verification process flow, output format template structure, and verification question categories. Implementation details and file structure conventions are documented in docs/cove/implementation.md which covers the SKILL.md frontmatter requirements, cove-process.md workflow sections, and slash command argument handling patterns matching existing skills like analysis-process.\n</info added on 2026-02-01T15:06:19.899Z>",
            "status": "done",
            "testStrategy": "Verify directory `.github/templates/claude/skills/cove/` exists using `ls -la .github/templates/claude/skills/` and confirm it appears alongside existing skill directories (analysis-process, development-guidelines, etc.)",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:17:13.535Z"
          },
          {
            "id": 2,
            "title": "Create SKILL.md with YAML frontmatter",
            "description": "Create the SKILL.md entry point file with proper YAML frontmatter containing the skill name and description fields as specified in the task details.",
            "dependencies": [
              1
            ],
            "details": "Create `.github/templates/claude/skills/cove/SKILL.md` with YAML frontmatter structure:\n```yaml\n---\nname: cove\ndescription: Apply Chain-of-Verification (CoVe) prompting to improve response accuracy through self-verification. Use for complex questions requiring fact-checking, technical accuracy, or multi-step reasoning.\n---\n```\nThe frontmatter format must match the existing pattern in `development-guidelines/SKILL.md` - using exactly `name:` and `description:` fields. The description should mention accuracy, verification, and complex questions as per the task specification.",
            "status": "done",
            "testStrategy": "Parse YAML frontmatter to verify: 1) `name` field equals 'cove', 2) `description` contains 'verification', 'accuracy', and 'complex' keywords, 3) YAML is valid and follows existing skill frontmatter patterns",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:17:13.540Z"
          },
          {
            "id": 3,
            "title": "Add SKILL.md content body with purpose and usage guidance",
            "description": "Add the content body to SKILL.md including CoVe purpose explanation, when-to-use bullet list, reference to cove-process.md, and invocation note.",
            "dependencies": [
              2
            ],
            "details": "Add content after the YAML frontmatter following the concise pattern from `development-guidelines/SKILL.md`. Required content:\n\n1. **Brief CoVe explanation** (1-2 paragraphs): Explain that CoVe is a verification technique that improves response accuracy through systematic self-verification\n\n2. **When to use this skill** (bullet list):\n   - Complex factual questions\n   - Technical specifications and API behavior\n   - Multi-step reasoning chains\n   - Code generation requiring accuracy verification\n\n3. **Reference to process file**: Direct users to `cove-process.md` for the detailed 4-step workflow (similar to how `analysis-process/SKILL.md` references its process files)\n\n4. **Invocation note**: Mention the skill can be invoked via `/cove` command\n\nKeep the entry point brief - detailed workflow goes in cove-process.md (task 10).",
            "status": "done",
            "testStrategy": "Verify SKILL.md contains: 1) 'When to use' or similar section header, 2) At least 4 bullet points for use cases, 3) Reference to 'cove-process.md' file, 4) Mention of '/cove' command invocation, 5) File follows concise pattern (not exceeding ~50 lines)",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:17:13.542Z"
          }
        ],
        "updatedAt": "2026-02-01T15:17:13.542Z"
      },
      {
        "id": "10",
        "title": "Implement cove-process.md verification workflow",
        "description": "Create the detailed verification workflow document that contains the complete 4-step CoVe process including verification question guidelines, output format template, and tool usage guidance.",
        "details": "Create `.github/templates/claude/skills/cove/cove-process.md` with the complete CoVe workflow.\n\n**Required sections:**\n\n1. **Workflow Checklist** (copyable format like `idea-process.md`):\n```\nCoVe Progress:\n- [ ] Step 1: Generate Initial Answer\n- [ ] Step 2: Create Verification Questions\n- [ ] Step 3: Independent Verification\n- [ ] Step 4: Reconciliation & Final Answer\n```\n\n2. **Step 1: Initial Response**\n   - Mark clearly as 'Initial Answer'\n   - Provide complete (not abbreviated) response\n   - Note areas of uncertainty\n\n3. **Step 2: Generate Verification Questions**\n   - Create 3-5 targeted questions\n   - Include table of question categories: Factual, Logical, Edge cases, Assumptions, Technical\n   - Guidelines: target critical claims, phrase for independent answering, avoid leading questions\n\n4. **Step 3: Independent Verification** (CRITICAL SECTION)\n   - **Strongly emphasize**: Answer questions WITHOUT referencing initial answer\n   - Treat each as fresh standalone question\n   - Encourage tool usage: WebSearch, context7, Read, Grep/Glob\n   - This independence prevents confirmation bias\n\n5. **Step 4: Reconciliation & Final Answer**\n   - Compare verification vs initial answer\n   - Identify discrepancies\n   - Verification answers take precedence\n   - Note corrections or confirm if no errors found\n\n6. **Output Format Template**:\n```markdown\n## Initial Answer\n[response]\n\n## Verification\n### Q1: [question]\n**A1:** [independent answer]\n[...repeat for 3-5 questions...]\n\n## Final Verified Answer\n[revised response]\n\n**Verification notes:**\n- [corrections or \"No corrections needed\"]\n```\n\n7. **Tool Usage Table**:\n| Tool | Use Case |\n|------|----------|\n| WebSearch | Current facts, recent changes |\n| context7 | Library docs, API references |\n| Read | Verify code claims |\n| Grep/Glob | Search codebase patterns |",
        "testStrategy": "1. Verify file contains copyable workflow checklist\n2. Verify all 4 steps are documented with clear instructions\n3. Verify Step 3 strongly emphasizes independent answering (search for 'without' or 'independently')\n4. Verify output format template is included and follows design spec\n5. Verify tool usage guidance table is present\n6. Verify question category table is included\n7. Compare formatting conventions with `idea-process.md`",
        "priority": "high",
        "dependencies": [
          "9"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Create workflow checklist section with copyable progress tracking",
            "description": "Create the initial section of cove-process.md containing the copyable workflow checklist following the pattern from idea-process.md. The checklist must include all 4 CoVe steps in a copy-paste friendly format.",
            "dependencies": [],
            "details": "Create the file `.github/templates/claude/skills/cove/cove-process.md` with a '### Workflow' heading and a copyable checklist block containing:\n```\nCoVe Progress:\n- [ ] Step 1: Generate Initial Answer\n- [ ] Step 2: Create Verification Questions\n- [ ] Step 3: Independent Verification\n- [ ] Step 4: Reconciliation & Final Answer\n```\nFollow the exact formatting conventions from `.github/templates/claude/skills/analysis-process/idea-process.md` which uses triple backticks for the checklist block. Include the instruction 'Copy this checklist and check off items as you complete them:' above the code block.\n<info added on 2026-02-01T15:06:49.537Z>\nI'll analyze the codebase to understand the project structure and locate the design documents mentioned in the user request.Now let me examine the specific lines mentioned in the user request (lines 119-142 of design.md for the output format template):Now let me check the Task 3 details in implementation.md:Based on my analysis of the design documents, here is the new text content that should be appended to subtask 10.1:\n\n**Design reference:** docs/cove/design.md lines 119-142 contain the complete output format template that must be included in cove-process.md. This template shows the exact markdown structure with sections for Initial Answer, Verification (Q&A pairs), Final Verified Answer, and Verification notes.\n\n**Implementation reference:** docs/cove/implementation.md Task 3 (lines 50-94) provides the complete content section specifications for cove-process.md including all 7 required sections: (1) Workflow Checklist with format `- [ ] Step N: Description`, (2) Step 1: Initial Response instructions, (3) Step 2: Generate Verification Questions with categories table and guidelines, (4) Step 3: Independent Verification with critical independence requirements and tool usage guidance, (5) Step 4: Reconciliation & Final Answer with discrepancy handling, (6) Output Format Template (the exact template from design.md:119-142), and (7) Tool Usage During Verification table.\n\n**Critical implementation detail from implementation.md:193-195:** Step 3 must strongly emphasize answering verification questions without referencing the initial answer. This independence prevents confirmation bias and is the key mechanism for catching errors. Use explicit language like 'Do NOT reference the initial answer' and 'Treat each question as coming from a new user'.\n\n**File location:** Create `.github/templates/claude/skills/cove/cove-process.md` (note the `.github/templates/` prefix for template files, as established by the project's template-sync infrastructure).\n</info added on 2026-02-01T15:06:49.537Z>",
            "status": "done",
            "testStrategy": "Verify file exists at correct path. Verify checklist contains exactly 4 steps with matching step names from design spec. Verify format uses code block for copyability.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:20:06.664Z"
          },
          {
            "id": 2,
            "title": "Document Steps 1-2: Initial Response and Verification Questions",
            "description": "Add detailed documentation for Step 1 (Initial Response) and Step 2 (Generate Verification Questions) including the question categories table and guidelines for effective verification questions.",
            "dependencies": [
              1
            ],
            "details": "Add to cove-process.md two complete step sections:\n\n**Step 1: Initial Response**\n- Requirement to mark clearly as 'Initial Answer'\n- Instruction to provide complete (not abbreviated) response\n- Note areas of uncertainty\n\n**Step 2: Generate Verification Questions**\n- Instructions to create 3-5 targeted questions\n- Include markdown table with categories: Factual, Logical, Edge cases, Assumptions, Technical (copy format from design.md lines 73-79)\n- Guidelines: target critical claims, phrase for independent answering, avoid leading questions, include at least one assumption-challenging question\n\nUse imperative mood throughout ('Generate...', 'Create...') consistent with existing skills.",
            "status": "done",
            "testStrategy": "Verify Step 1 section exists with 'Initial Answer' marking requirement. Verify Step 2 contains 5-category table. Verify guidelines mention 'independently' or 'independent'. Verify 3-5 questions requirement is stated.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:20:06.667Z"
          },
          {
            "id": 3,
            "title": "Document Step 3: Independent Verification with strong independence emphasis",
            "description": "Add the critical Step 3 section emphasizing independent verification without referencing the initial answer. This is the most important section for preventing confirmation bias.",
            "dependencies": [
              1
            ],
            "details": "Add Step 3: Independent Verification section with strong emphasis on independence:\n\n1. **Bold/emphasized statement**: Answer each question WITHOUT referencing the initial answer\n2. Instruction to treat each question as a fresh standalone question from a new user\n3. Tool usage encouragement section with table:\n   | Tool | Use Case |\n   |------|----------|\n   | WebSearch | Current facts, recent changes |\n   | context7 | Library docs, API references |\n   | Read | Verify code claims |\n   | Grep/Glob | Search codebase patterns |\n4. Explicit warning that this independence prevents confirmation bias\n5. Use phrases like 'independently', 'without', 'do NOT reference' multiple times to reinforce the critical requirement\n\nThis section must be the most emphatic in the document per the PRD requirement.",
            "status": "done",
            "testStrategy": "Search document for 'without' or 'independently' - should appear multiple times in Step 3. Verify tool usage table exists with all 4 tools. Verify confirmation bias is mentioned. Verify 'do NOT reference' or similar strong language is present.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:20:06.675Z"
          },
          {
            "id": 4,
            "title": "Document Step 4 and output format template with verification notes",
            "description": "Add Step 4 (Reconciliation & Final Answer) documentation and the complete output format template showing the expected structure for CoVe responses.",
            "dependencies": [
              2,
              3
            ],
            "details": "Add two sections to complete cove-process.md:\n\n**Step 4: Reconciliation & Final Answer**\n- Instructions for comparing verification answers vs initial answer\n- Process for identifying discrepancies\n- Rule: verification answers take precedence when conflicts arise\n- Handling for when no errors found (note corrections or confirm initial answer)\n\n**Output Format Template** section with complete markdown template:\n```markdown\n## Initial Answer\n[response]\n\n## Verification\n### Q1: [question]\n**A1:** [independent answer]\n[...repeat for 3-5 questions...]\n\n## Final Verified Answer\n[revised response]\n\n**Verification notes:**\n- [corrections or \"No corrections needed\"]\n```\n\nEnsure template exactly matches design.md format (lines 119-142) and PRD requirements.",
            "status": "done",
            "testStrategy": "Verify Step 4 mentions 'verification answers take precedence' or 'precedence'. Verify output format template exists with all 3 sections (Initial Answer, Verification, Final Verified Answer). Verify verification notes section is included in template. Verify Q1/A1 pattern shown.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:20:06.677Z"
          }
        ],
        "updatedAt": "2026-02-01T15:20:06.677Z"
      },
      {
        "id": "11",
        "title": "Create /cove slash command",
        "description": "Create the slash command at `.claude/commands/cove/cove.md` that invokes the CoVe skill, handling both question arguments and verification of previous responses.",
        "details": "Create command directory and file: `.github/templates/claude/commands/cove/cove.md`\n\n**Content structure:**\n\n1. **Brief description** (1-2 lines):\n   - Apply Chain-of-Verification to improve response accuracy\n\n2. **Arguments handling** (similar to `show-task.md` pattern):\n```\nArguments: $ARGUMENTS\n```\n\n3. **Invocation logic:**\n   - If `$ARGUMENTS` provided: Apply CoVe to the given question\n   - If `$ARGUMENTS` empty: Apply CoVe to verify the previous response in conversation\n\n4. **Skill invocation instruction:**\n   - Reference and invoke the `cove` skill\n   - Follow the process in `cove-process.md`\n\n5. **Brief usage examples** (optional, 2-3 lines):\n   - `/cove What is the time complexity of Python's sorted()?`\n   - `/cove` (after receiving a response to verify)\n\n**Keep the command file concise** - it's an entry point that delegates to the skill, not a full workflow document.",
        "testStrategy": "1. Verify directory `.github/templates/claude/commands/cove/` exists\n2. Verify `cove.md` handles `$ARGUMENTS` variable\n3. Verify command describes both with-arguments and no-arguments behavior\n4. Verify command references the cove skill\n5. Check formatting follows existing command patterns (compare with tm commands)",
        "priority": "high",
        "dependencies": [
          "9"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Create cove command directory structure",
            "description": "Create the directory `.github/templates/claude/commands/cove/` to house the CoVe slash command file.",
            "dependencies": [],
            "details": "Create the directory using `mkdir -p .github/templates/claude/commands/cove/`. This follows the existing pattern where commands are organized in subdirectories under `.github/templates/claude/commands/` (like `tm/show/`, `tm/next/`, etc.). The directory must exist before the cove.md file can be created.\n<info added on 2026-02-01T15:07:12.715Z>\nI'll analyze the codebase structure to understand the slash command patterns and then provide the specific implementation details for subtask 11.1.Based on my analysis of the existing command structure in `.github/templates/claude/commands/tm/` and the design/implementation documents, here is the new text content to append to subtask 11.1:\n\n---\n\nThe command directory follows the template-based structure where files in `.github/templates/` are synced to `.claude/` during template operations. Per the implementation plan (docs/cove/implementation.md Task 4), the slash command will be located at `.github/templates/claude/commands/cove/cove.md` and will handle arguments using the `$ARGUMENTS` variable pattern seen in commands like `.github/templates/claude/commands/tm/show/show-task.md`. The design document (docs/cove/design.md lines 145-159) specifies two invocation modes: with arguments to verify a specific question, and without arguments to verify the previous response in the conversation.\n</info added on 2026-02-01T15:07:12.715Z>\n<info added on 2026-02-01T17:29:21.262Z>\nBased on the user request indicating the directory now contains both `cove.md` and `cove-isolated.md` files, here is the new text content:\n\nDirectory successfully created and verified containing both command files: cove.md (standard CoVe command) and cove-isolated.md (isolated sub-agent mode command). The structure matches the template-based pattern where `.github/templates/claude/commands/` files are synced to `.claude/commands/` during template operations.\n</info added on 2026-02-01T17:29:21.262Z>",
            "status": "done",
            "testStrategy": "Verify directory `.github/templates/claude/commands/cove/` exists using `ls -la .github/templates/claude/commands/cove/` or checking with file explorer.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:30:30.804Z"
          },
          {
            "id": 2,
            "title": "Implement cove.md command file with argument handling",
            "description": "Create the `cove.md` command file with proper description, $ARGUMENTS handling for both question and verify-previous-response modes, and skill invocation reference.",
            "dependencies": [
              1
            ],
            "details": "Create `.github/templates/claude/commands/cove/cove.md` following the patterns from existing commands like `show-task.md`. The file must include: (1) Brief 1-2 line description about applying CoVe for improved accuracy; (2) Arguments line: `Arguments: $ARGUMENTS`; (3) Conditional logic section explaining behavior when $ARGUMENTS is provided (apply CoVe to the question) vs when empty (verify previous response in conversation); (4) Instruction to invoke the `cove` skill and follow the process in `cove-process.md`; (5) Optional brief usage examples showing `/cove What is the time complexity of...` and `/cove` for verification.\n<info added on 2026-02-01T17:29:46.952Z>\nI'll analyze the codebase to understand the command structure and provide specific implementation details for the subtask update.Based on my analysis of the codebase, the file has been successfully implemented at `.github/templates/claude/commands/cove/cove.md`. The implementation includes all required elements:\n\nFile successfully created at `.github/templates/claude/commands/cove/cove.md` with complete implementation including: 1-line description of CoVe for accuracy improvement, Arguments line with $ARGUMENTS variable, conditional invocation logic distinguishing between question mode (when arguments provided) and verification mode (when empty), direct skill reference to cove-process.md with 4-step workflow summary, and two usage examples demonstrating /cove with question and /cove without arguments for verification. Implementation follows existing command patterns from show-task.md including Arguments section, multiple invocation modes with IF/ELSE structure, Process section with skill reference, and Examples section with code blocks.\n</info added on 2026-02-01T17:29:46.952Z>",
            "status": "done",
            "testStrategy": "Verify cove.md exists and contains: $ARGUMENTS variable, description of with-arguments and no-arguments behavior, reference to cove skill/cove-process.md, formatting consistent with show-task.md pattern.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:30:30.812Z"
          },
          {
            "id": 3,
            "title": "Verify command structure and integration with skill",
            "description": "Validate the command file follows existing patterns, properly references the cove skill, and handles both invocation modes correctly.",
            "dependencies": [
              2
            ],
            "details": "Perform validation checks: (1) Compare cove.md structure against existing commands like `show-task.md` and `next-task.md` to ensure consistent formatting; (2) Verify the skill reference points to the correct skill name `cove` which will be defined in SKILL.md; (3) Check that argument handling logic clearly distinguishes between providing a question and verifying previous response; (4) Ensure the command is concise (entry point only) and delegates workflow details to the skill; (5) Verify file uses imperative mood and matches markdown conventions from other commands.\n<info added on 2026-02-01T17:30:24.517Z>\nI'll analyze the codebase to verify the command structure and provide specific validation results.Based on my analysis of the codebase, here is the validation result:\n\nCommand structure confirmed: (1) Format matches tm command patterns - uses \"Arguments: $ARGUMENTS\" header followed by sections with markdown headers; (2) Skill reference verified - correctly invokes \"cove\" skill defined in `.claude/skills/cove/SKILL.md`; (3) Dual invocation modes properly documented - distinguishes between providing question ($ARGUMENTS present) vs verifying previous response ($ARGUMENTS empty); (4) Appropriate delegation - command is concise entry point (31 lines), workflow details correctly delegated to `cove-process.md` skill file; (5) Style conventions followed - uses imperative mood (\"Apply\", \"Invoke\"), consistent with other commands like `to-done.md` and `next-task.md`.\n</info added on 2026-02-01T17:30:24.517Z>",
            "status": "done",
            "testStrategy": "Perform diff/comparison with show-task.md for structural consistency. Grep for 'cove' skill reference. Manual review that both invocation modes are clearly documented. Verify file length is appropriately concise (roughly 20-40 lines, not a full workflow document).",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:30:30.819Z"
          }
        ],
        "updatedAt": "2026-02-01T17:30:30.819Z"
      },
      {
        "id": "12",
        "title": "Add natural language invocation triggers to skill",
        "description": "Update the SKILL.md to include natural language trigger phrases that Claude should recognize as requests to use the CoVe skill without explicit /cove invocation.",
        "details": "Enhance `.github/templates/claude/skills/cove/SKILL.md` to include natural language recognition.\n\n**Add section for trigger phrases:**\n\nRecognize these phrases as invocation requests:\n- \"verify this using chain of verification\"\n- \"use CoVe to answer\"\n- \"fact-check your response\"\n- \"double-check this with verification\"\n- \"use self-verification for this\"\n\n**Implementation approach:**\nAdd a section titled 'Natural Language Invocation' that lists phrases Claude should recognize. This enables the skill to be invoked without memorizing the exact `/cove` command.\n\n**Also add 'When to Use' guidance:**\n- Questions requiring precision (\"exactly\", \"precisely\", \"specific\")\n- Multi-step reasoning chains (3+ logical steps)\n- Technical claims about APIs or version-specific behavior\n- Historical facts, statistics, or quantitative data\n- Security-critical code analysis\n- When initial response contains hedging (\"I think\", \"probably\")\n\n**Note:** This is guidance only - auto-trigger is NOT implemented by default (per PRD non-goal). Users who want auto-trigger can reference this in their project CLAUDE.md.",
        "testStrategy": "1. Verify SKILL.md contains 'Natural Language Invocation' section\n2. Verify at least 3 trigger phrases are documented\n3. Verify 'When to Use' guidance is included\n4. Verify the skill does NOT implement auto-trigger by default\n5. Verify guidance mentions users can add auto-trigger to their CLAUDE.md if desired",
        "priority": "medium",
        "dependencies": [
          "9",
          "10"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add Natural Language Invocation section with trigger phrases",
            "description": "Add a new section titled 'Natural Language Invocation' to SKILL.md that lists the phrases Claude should recognize as requests to invoke the CoVe skill without explicit /cove command.",
            "dependencies": [],
            "details": "Edit `.github/templates/claude/skills/cove/SKILL.md` to add a new section after the existing content. The section should include:\n\n**Section Header:** '## Natural Language Invocation'\n\n**Introductory text:** Brief explanation that Claude should recognize these phrases as requests to invoke the CoVe skill.\n\n**Trigger phrases list (minimum 5):**\n- \"verify this using chain of verification\"\n- \"use CoVe to answer\"\n- \"fact-check your response\"\n- \"double-check this with verification\"\n- \"use self-verification for this\"\n\n**Important notes to include:**\n- This is guidance for manual recognition only\n- Auto-trigger is NOT implemented by default (per PRD non-goal)\n- Users who want auto-trigger behavior can reference this section in their project CLAUDE.md to enable automatic invocation\n\nFollow the markdown formatting conventions from existing skills (imperative mood, concise bullet points).",
            "status": "done",
            "testStrategy": "1. Verify SKILL.md contains 'Natural Language Invocation' section header\n2. Verify at least 5 trigger phrases are documented in a bullet list\n3. Grep for 'verify this using chain of verification' and 'use CoVe' phrases\n4. Verify explicit note that auto-trigger is NOT default behavior\n5. Verify mention of users adding to CLAUDE.md for auto-trigger",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:30:59.719Z"
          },
          {
            "id": 2,
            "title": "Add When to Use guidance section with auto-trigger indicators",
            "description": "Add a 'When to Use' guidance section that documents the scenarios and heuristics where CoVe is most beneficial, providing users with criteria they can optionally use for auto-trigger configuration.",
            "dependencies": [
              1
            ],
            "details": "Add a new section to SKILL.md titled '## When to Use' or integrate with existing when-to-use content. Document the specific scenarios where CoVe provides the most value:\n\n**Precision indicators:**\n- Questions containing precision language (\"exactly\", \"precisely\", \"specific\")\n\n**Complexity indicators:**\n- Multi-step reasoning chains (3+ logical dependencies)\n- Technical claims about APIs, libraries, or version-specific behavior\n\n**Fact-checking scenarios:**\n- Historical facts, statistics, or quantitative data\n- Security-critical code paths or analysis\n\n**Self-correction triggers:**\n- When initial response contains hedging language (\"I think\", \"probably\", \"might be\")\n\n**Implementation notes:**\n- These are guidelines for when CoVe adds value, not automatic triggers\n- Reference design.md lines 170-177 for auto-trigger indicator specification\n- Users can copy these heuristics to their CLAUDE.md to enable auto-invocation if desired\n\nThis section serves dual purposes: helping users decide when to manually invoke /cove, and providing copy-paste heuristics for those who want to configure auto-trigger in their project.",
            "status": "done",
            "testStrategy": "1. Verify 'When to Use' section exists with guidance content\n2. Verify at least 6 indicator types are documented (precision, multi-step, technical claims, historical facts, security-critical, hedging language)\n3. Verify explicit mention that users can add auto-trigger to CLAUDE.md\n4. Verify section does NOT implement auto-trigger itself\n5. Verify formatting is consistent with existing skill documentation patterns",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:30:59.721Z"
          }
        ],
        "updatedAt": "2026-02-01T15:30:59.721Z"
      },
      {
        "id": "13",
        "title": "Validate CoVe skill integration and output format",
        "description": "Perform integration testing to verify the skill appears in Claude's skill list, the /cove command invokes correctly, all four verification steps appear in output, and the skill follows project conventions.",
        "details": "Comprehensive validation of the complete CoVe implementation.\n\n**Validation checklist:**\n\n1. **File structure verification:**\n   - `.github/templates/claude/skills/cove/SKILL.md` exists with valid frontmatter\n   - `.github/templates/claude/skills/cove/cove-process.md` exists with complete workflow\n   - `.github/templates/claude/commands/cove/cove.md` exists with argument handling\n\n2. **Content validation:**\n   - SKILL.md name field is exactly 'cove'\n   - SKILL.md description mentions verification/accuracy\n   - cove-process.md contains all 4 steps\n   - cove-process.md has output format template\n   - cove.md handles both with/without arguments\n\n3. **Convention compliance:**\n   - YAML frontmatter format matches other skills\n   - Markdown formatting is consistent\n   - Imperative mood used in instructions\n   - No code examples in skill files (prompting technique only)\n   - No modifications to CLAUDE.md or settings.json\n\n4. **Test scenarios to document:**\n   - `/cove What is the default port for PostgreSQL?`\n   - Previous response verification (no args)\n   - Natural language: \"Use chain of verification to answer...\"\n   - Code verification scenario\n\n5. **Expected output structure:**\n   - Initial Answer section present\n   - Verification section with 3-5 Q&A pairs\n   - Final Verified Answer section present\n   - Verification notes listing corrections or confirmation\n\n**Create test documentation** in `docs/cove/` noting the test scenarios and expected behaviors for manual verification.",
        "testStrategy": "1. Run file existence checks for all 3 created files\n2. Parse YAML frontmatter in SKILL.md and verify name='cove'\n3. Search cove-process.md for key terms: 'Initial Answer', 'Verification', 'Independent', 'Final'\n4. Search cove.md for '$ARGUMENTS' handling\n5. Verify no changes made to CLAUDE.md or settings.json (per PRD non-goals)\n6. Document test scenarios for future manual validation\n7. Verify output format template in cove-process.md matches design spec exactly",
        "priority": "medium",
        "dependencies": [
          "9",
          "10",
          "11",
          "12"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Verify file structure and content compliance",
            "description": "Validate that all CoVe skill files exist in the correct locations with proper content structure following project conventions.",
            "dependencies": [],
            "details": "Perform file existence checks and content validation:\n\n1. **Directory structure verification:**\n   - Verify `.github/templates/claude/skills/cove/` directory exists\n   - Verify `.github/templates/claude/commands/cove/` directory exists\n\n2. **File existence checks:**\n   - `.github/templates/claude/skills/cove/SKILL.md` exists\n   - `.github/templates/claude/skills/cove/cove-process.md` exists\n   - `.github/templates/claude/commands/cove/cove.md` exists\n\n3. **SKILL.md content validation:**\n   - Parse YAML frontmatter and verify `name` field equals exactly `cove`\n   - Verify `description` field mentions verification, accuracy, or fact-checking\n   - Verify file contains reference to `cove-process.md`\n   - Compare frontmatter format against existing skills (e.g., `.github/templates/claude/skills/testing-process/SKILL.md`)\n\n4. **cove-process.md content validation:**\n   - Search for all 4 CoVe steps: Initial Answer, Generate Verification Questions, Independent Verification, Final Verified Answer\n   - Verify output format template exists with sections: Initial Answer, Verification (Q&A pairs), Final Verified Answer, Verification notes\n   - Verify tool usage guidance is present (WebSearch, context7, Read, Grep)\n\n5. **cove.md command validation:**\n   - Verify `$ARGUMENTS` variable handling exists\n   - Verify both with-arguments and no-arguments behavior documented\n   - Verify skill invocation reference is present\n\n6. **Convention compliance:**\n   - Verify no modifications made to CLAUDE.md or settings.json\n   - Compare markdown formatting against existing skills for consistency\n   - Verify imperative mood used in instructions",
            "status": "done",
            "testStrategy": "Use Glob to verify directories exist, Read to examine file contents, Grep to search for required terms (YAML fields, step names, output format sections). Compare structure against existing skills like testing-process and analysis-process for convention compliance.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:32:44.853Z"
          },
          {
            "id": 2,
            "title": "Create test scenarios documentation",
            "description": "Document comprehensive test scenarios with expected behaviors for manual verification of the CoVe skill functionality.",
            "dependencies": [
              1
            ],
            "details": "Create test documentation in `docs/cove/test-scenarios.md` covering:\n\n1. **Slash command with question test:**\n   - Input: `/cove What is the default port for PostgreSQL?`\n   - Expected: Full 4-step CoVe workflow\n   - Verify: Initial Answer identifies port 5432, verification questions challenge this, independent answers confirm, final answer states verified port\n\n2. **Previous response verification test:**\n   - Step 1: Ask a factual question (e.g., \"What is TCP?\")\n   - Step 2: Invoke `/cove` without arguments\n   - Expected: CoVe applies to the previous response\n   - Verify: All 4 steps present, verification questions relevant to previous response topic\n\n3. **Natural language invocation test:**\n   - Input: \"Use chain of verification to answer: What is the memory limit for AWS Lambda?\"\n   - Expected: Skill recognized and invoked\n   - Verify: Same 4-step structure appears\n\n4. **Code verification scenario test:**\n   - Input: `/cove Is binary search O(log n) time complexity?`\n   - Expected: Verification questions about algorithm analysis\n   - Verify: Questions cover edge cases, assumptions, and technical correctness\n\n5. **Output format checklist for each test:**\n   - [ ] Initial Answer section clearly marked\n   - [ ] Verification section has 3-5 Q&A pairs\n   - [ ] Q&A pairs use independent reasoning (no self-reference)\n   - [ ] Final Verified Answer section present\n   - [ ] Verification notes list corrections OR confirm no corrections needed\n\n6. **Edge case documentation:**\n   - Ambiguous questions\n   - Questions where initial answer is already correct\n   - Questions where verification finds errors",
            "status": "done",
            "testStrategy": "Review the created test-scenarios.md file to ensure all 4 test scenarios are documented with clear inputs, expected outputs, and verification checklists. Verify the document follows markdown formatting conventions.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:34:44.867Z"
          },
          {
            "id": 3,
            "title": "Perform end-to-end validation and finalize documentation",
            "description": "Execute manual verification of all test scenarios in Claude Code and document results with any issues found.",
            "dependencies": [
              1,
              2
            ],
            "details": "Perform end-to-end validation and create final validation report:\n\n1. **Pre-validation setup:**\n   - Ensure template-sync has been run to copy CoVe files to `.claude/` directory\n   - Verify `/mcp` shows all servers connected\n   - Clear Claude Code context with `/clear`\n\n2. **Execute test scenarios from test-scenarios.md:**\n   - Run each of the 4 documented test scenarios\n   - Record actual output for each test\n   - Note any deviations from expected behavior\n\n3. **Skill integration verification:**\n   - Verify skill appears when user references CoVe or chain of verification\n   - Verify `/cove` command is recognized\n   - Verify natural language triggers skill invocation\n\n4. **Output format validation for each test:**\n   - Verify Initial Answer section is present and complete\n   - Verify 3-5 verification questions are generated\n   - Verify independent answers don't reference initial answer\n   - Verify Final Verified Answer synthesizes verification findings\n   - Verify Verification notes section present\n\n5. **Create validation-report.md in `docs/cove/`:**\n   - Summary: Pass/Fail for each test scenario\n   - Detailed results for each test with actual output snippets\n   - Issues found (if any) with severity and suggested fixes\n   - Convention compliance checklist results\n   - Recommendations for improvements (if any)\n\n6. **Final checklist verification:**\n   - [ ] All 3 CoVe files exist and have correct content\n   - [ ] SKILL.md name field is exactly 'cove'\n   - [ ] cove-process.md contains all 4 steps\n   - [ ] cove.md handles arguments correctly\n   - [ ] No changes to CLAUDE.md or settings.json\n   - [ ] Output format matches design specification",
            "status": "done",
            "testStrategy": "Execute all test scenarios manually in Claude Code, document results in validation-report.md. Create a pass/fail summary with evidence (output snippets). Flag any issues with clear descriptions and reproduction steps.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T15:35:59.644Z"
          }
        ],
        "updatedAt": "2026-02-01T15:35:59.644Z"
      },
      {
        "id": "14",
        "title": "Create cove-isolated.md Workflow File",
        "description": "Create the isolated mode workflow file that implements true factored verification using Claude Code's Task tool to spawn isolated sub-agents. This file defines the 4-step verification process where Step 3 uses sub-agents instead of prompt-based isolation.",
        "details": "**Location:** `.claude/skills/cove/cove-isolated.md`\n\n**File Structure:**\n\n1. **Workflow Checklist** (lines 1-12)\n   - Copy same structure as `cove-process.md` checklist\n   - Add note that Step 3 uses sub-agents for isolation\n\n2. **Step 1-2: Same as Standard Mode** (lines 14-47)\n   - Reference or duplicate the Initial Response instructions from `cove-process.md`\n   - Reference or duplicate the Verification Questions generation from `cove-process.md`\n   - These steps are identical to standard mode\n\n3. **Step 3: Isolated Verification with Sub-Agents** (lines 49-120)\n   This is the critical differentiator from standard mode.\n\n   **3.1 Flag Parsing Section:**\n   - Document supported flags: `--explore`, `--haiku`, `--agent=<name>`\n   - Flag parsing rules:\n     - Flags must appear before the question in $ARGUMENTS\n     - `--explore` is shorthand for `--agent=Explore`\n     - `--haiku` sets model parameter to haiku\n     - `--agent=<name>` uses specified agent type (default: `general-purpose`)\n   - Flags can be combined: `--haiku --explore`\n\n   **3.2 Sub-Agent Prompt Template:**\n   ```\n   You are answering a factual question. Research thoroughly using available tools\n   before answering. Cite your sources.\n\n   Question: {verification_question}\n\n   Requirements:\n   1. Use WebSearch, context7, Read, or other tools to verify your answer\n   2. If you cannot find authoritative sources, state that clearly\n   3. Provide a concise, factual answer with source citations\n   4. Do NOT speculate - only report what you can verify\n   ```\n\n   **3.3 Task Tool Usage Instructions:**\n   - For EACH verification question, create a Task tool call with:\n     - `subagent_type`: From flags or default `general-purpose`\n     - `model`: `haiku` if `--haiku` flag present, otherwise omit\n     - `prompt`: Sub-agent prompt template with {verification_question} substituted\n     - `description`: \"CoVe Q{N}: {first 5 words of question}...\"\n   - **CRITICAL**: All Task calls must be in a SINGLE message for parallel execution\n   - Example with 3 questions shows 3 Task calls in same message block\n\n   **3.4 Response Collection:**\n   - Collect responses from all sub-agents\n   - Note which agent type was used for each\n   - Record any failures or timeouts\n\n4. **Step 4: Reconciliation** (lines 122-180)\n   - Same reconciliation process as standard mode\n   - Extended output format with agent metadata:\n     - Agent type used for each verification\n     - Status (✓ Completed, ✗ Failed, ⏱ Timed out)\n     - Source citations from sub-agents\n\n5. **Output Format Template** (lines 182-230)\n   Use the isolated mode format from design.md:\n   ```markdown\n   ## Initial Answer\n   [Complete initial response]\n\n   ## Verification (Isolated Mode)\n\n   ### Q1: [Question]\n   **Agent:** general-purpose | **Status:** ✓ Completed\n   **A1:** [Sub-agent's answer]\n   **Source:** [Citation]\n\n   [... Q2, Q3 ...]\n\n   ## Reconciliation\n\n   | Claim | Verification | Status | Action |\n   |-------|--------------|--------|--------|\n   | [Claim] | Q1 | ✓ Confirmed | Keep |\n\n   ## Final Verified Answer\n   [Revised response]\n\n   **Verification notes:**\n   - Isolation method: Sub-agent (true factored verification)\n   - Agents used: [count]x [types]\n   - Corrections: [list]\n   - Confirmations: [list]\n   ```\n\n6. **Error Handling Section** (lines 232-260)\n   - Sub-agent timeout: Mark verification as \"Inconclusive\" (⏱ Timed out)\n   - Sub-agent failure: Fall back to standard mode for that question only\n   - All sub-agents fail: Abort isolated mode, suggest using `/cove` instead\n   - Include example error messaging",
        "testStrategy": "**Validation Criteria:**\n1. File exists at `.claude/skills/cove/cove-isolated.md`\n2. Contains all 4 workflow steps matching standard mode structure\n3. Step 3 includes complete sub-agent spawning instructions\n4. Flag parsing section documents all three flags (`--explore`, `--haiku`, `--agent=<name>`)\n5. Sub-agent prompt template is present and minimal (no initial answer context)\n6. Parallel execution is clearly instructed (single message, multiple Task calls)\n7. Output format includes agent metadata columns\n8. Error handling covers timeout, failure, and all-fail scenarios\n9. File follows same markdown formatting conventions as `cove-process.md`\n10. No references to auto-trigger (manual invocation only)",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Create workflow checklist and Steps 1-2 sections",
            "description": "Create the initial structure of cove-isolated.md with the workflow checklist and Steps 1-2 that mirror the standard mode from cove-process.md",
            "dependencies": [],
            "details": "Create `.github/templates/claude/skills/cove/cove-isolated.md` and add:\n\n1. Workflow checklist (lines 1-14):\n   - Copy the checklist structure from cove-process.md lines 1-11\n   - Add note: 'Note: Step 3 uses isolated sub-agents for true factored verification'\n   - Format: Same markdown checklist with 4 steps\n\n2. Step 1: Initial Response (lines 16-24):\n   - Reference or duplicate content from cove-process.md lines 15-23\n   - Keep requirements identical: mark as 'Initial Answer', provide complete response, note uncertainties\n\n3. Step 2: Generate Verification Questions (lines 26-48):\n   - Reference or duplicate content from cove-process.md lines 26-46\n   - Include question categories table\n   - Include guidelines for effective verification questions\n   - These steps are identical to standard mode, so exact duplication is acceptable\n<info added on 2026-02-01T16:39:37.751Z>\nI'll analyze the codebase to understand the project structure and then examine the referenced documentation files to provide accurate subtask details.Based on the referenced documentation from the design specification (lines 241-328) and implementation plan (lines 120-202), the following information should be appended to subtask 14.1:\n\nReference design specification at docs/cove/design.md (Verification Modes section, lines 241-328) for isolated mode architecture details, including sub-agent prompt template and flag parsing rules. Reference implementation plan at docs/cove/implementation.md (Task 6, lines 120-202) for content structure requirements.\n\nKey implementation notes:\n- Steps 1-2 mirror cove-process.md exactly (lines 15-46 cover initial response and verification questions)\n- Step 3 diverges: uses Claude Code Task tool with isolated sub-agents instead of prompt-based isolation\n- Sub-agent spawning must support three flags: --explore (Explore agent), --haiku (haiku model), --agent=<name> (custom agent type)\n- Sub-agents receive ONLY verification questions with zero context about initial answer\n- Parallel execution required: spawn all sub-agents concurrently via multiple Task calls in single message\n- Error handling: timeout → mark inconclusive, sub-agent failure → fallback to standard mode, all failures → suggest /cove instead\n</info added on 2026-02-01T16:39:37.751Z>",
            "status": "done",
            "testStrategy": "1. File exists at `.github/templates/claude/skills/cove/cove-isolated.md`\n2. Workflow checklist present with note about sub-agents\n3. Steps 1-2 match or reference cove-process.md content\n4. Markdown formatting is clean and consistent\n5. Line numbers approximately match specification (±5 lines acceptable)",
            "updatedAt": "2026-02-01T16:48:26.555Z",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement Step 3: Isolated Verification with Sub-Agents",
            "description": "Create the critical Step 3 section that differentiates isolated mode from standard mode by implementing sub-agent spawning with the Task tool",
            "dependencies": [
              1
            ],
            "details": "Add Step 3 to cove-isolated.md (lines 50-122):\n\n1. **Section Header** (line 50):\n   '## Step 3: Isolated Verification with Sub-Agents'\n\n2. **Flag Parsing Section** (lines 52-65):\n   - Document three flags: `--explore`, `--haiku`, `--agent=<name>`\n   - Flag parsing rules:\n     - Flags must appear before the question in $ARGUMENTS\n     - `--explore` is shorthand for `--agent=Explore`\n     - `--haiku` sets model parameter to haiku\n     - `--agent=<name>` uses specified agent type (default: general-purpose)\n   - Flags can be combined: `--haiku --explore`\n\n3. **Sub-Agent Prompt Template** (lines 67-80):\n   ```\n   You are answering a factual question. Research thoroughly using available tools\n   before answering. Cite your sources.\n\n   Question: {verification_question}\n\n   Requirements:\n   1. Use WebSearch, context7, Read, or other tools to verify your answer\n   2. If you cannot find authoritative sources, state that clearly\n   3. Provide a concise, factual answer with source citations\n   4. Do NOT speculate - only report what you can verify\n   ```\n\n4. **Task Tool Usage Instructions** (lines 82-105):\n   - For EACH verification question, create a Task tool call with:\n     - `subagent_type`: From flags or default `general-purpose`\n     - `model`: `haiku` if `--haiku` flag present, otherwise omit\n     - `prompt`: Sub-agent prompt template with {verification_question} substituted\n     - `description`: 'CoVe Q{N}: {first 5 words of question}...'\n   - **CRITICAL**: All Task calls must be in a SINGLE message for parallel execution\n   - Include example showing 3 questions → 3 Task calls in same message block\n\n5. **Response Collection** (lines 107-122):\n   - Collect responses from all sub-agents\n   - Note which agent type was used for each\n   - Record any failures or timeouts",
            "status": "done",
            "testStrategy": "1. Step 3 section contains all 5 subsections\n2. Flag parsing documents all three flags with correct syntax\n3. Sub-agent prompt template matches design.md lines 290-303\n4. Task tool instructions emphasize parallel execution (single message)\n5. Example shows multiple Task calls in one message block\n6. Response collection section handles agent metadata",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:48:26.559Z"
          },
          {
            "id": 3,
            "title": "Create Step 4: Reconciliation and output format template",
            "description": "Implement the reconciliation step and isolated mode output format template with agent metadata",
            "dependencies": [
              2
            ],
            "details": "Add Step 4 and output format to cove-isolated.md:\n\n1. **Step 4: Reconciliation** (lines 124-182):\n   - Same reconciliation process as cove-process.md lines 92-120\n   - Extended output format with agent metadata:\n     - Agent type used for each verification\n     - Status indicators: ✓ Completed, ✗ Failed, ⏱ Timed out\n     - Source citations from sub-agents\n   - Claim-by-claim comparison table format\n   - Resolution rules for contradicted/inconclusive/confirmed claims\n\n2. **Output Format Template** (lines 184-232):\n   Use the isolated mode format from design.md lines 340-378:\n   ```markdown\n   ## Initial Answer\n   [Complete initial response]\n\n   ## Verification (Isolated Mode)\n\n   ### Q1: [Question]\n   **Agent:** general-purpose | **Status:** ✓ Completed\n   **A1:** [Sub-agent's answer]\n   **Source:** [Citation]\n\n   ### Q2: [Question]\n   **Agent:** Explore | **Status:** ✓ Completed\n   **A2:** [Sub-agent's answer]\n   **Source:** [Citation]\n\n   [... Q3 ...]\n\n   ## Reconciliation\n\n   | Claim | Verification | Status | Action |\n   |-------|--------------|--------|--------|\n   | [Claim] | Q1 | ✓ Confirmed | Keep |\n   | [Another] | Q2 | ✗ Contradicted | Correct to: [value] |\n\n   ## Final Verified Answer\n   [Revised response]\n\n   **Verification notes:**\n   - Isolation method: Sub-agent (true factored verification)\n   - Agents used: [count]x [types]\n   - Corrections: [list]\n   - Confirmations: [list]\n   ```",
            "status": "done",
            "testStrategy": "1. Step 4 reconciliation section matches standard mode process\n2. Output format template includes agent metadata fields\n3. Status indicators documented: ✓ ✗ ⏱\n4. Reconciliation table format present\n5. Verification notes section includes isolation method and agents used\n6. Template is complete and ready for copy-paste usage",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:48:26.567Z"
          },
          {
            "id": 4,
            "title": "Add error handling section and final validation",
            "description": "Add comprehensive error handling guidance for sub-agent failures and validate the complete workflow file against specifications",
            "dependencies": [
              3
            ],
            "details": "Complete cove-isolated.md with error handling:\n\n1. **Error Handling Section** (lines 234-262):\n   Add section '## Error Handling' with:\n   \n   - **Sub-agent timeout**: Mark verification as 'Inconclusive' with ⏱ Timed out status\n   - **Sub-agent failure**: Fall back to standard mode for that question only\n     - Explain: 'If a single sub-agent fails, answer that verification question using standard mode (prompt-based isolation) and note in output'\n   - **All sub-agents fail**: Abort isolated mode entirely\n     - Message template: 'Isolated mode unavailable due to sub-agent failures. Please use `/cove` for standard mode verification instead.'\n   - Include example error output:\n     ```\n     ### Q2: [Question]\n     **Agent:** general-purpose | **Status:** ⏱ Timed out\n     **A2:** Inconclusive - sub-agent timeout\n     **Source:** N/A\n     ```\n\n2. **Final Validation**:\n   - Verify total file is approximately 260 lines\n   - Check all 4 steps are present and complete\n   - Confirm flag parsing, sub-agent prompts, and error handling are comprehensive\n   - Ensure output format matches design.md specification\n   - Validate markdown formatting is consistent\n   - Compare against implementation.md lines 160-202 for completeness",
            "status": "done",
            "testStrategy": "1. Error handling section exists with all three scenarios covered\n2. Each error scenario has clear guidance and output examples\n3. File length approximately 260 lines (±20 lines acceptable)\n4. All sections from task details are present: checklist, steps 1-4, output format, error handling\n5. Cross-reference with design.md lines 259-328 confirms all requirements met\n6. Markdown is well-formatted with proper headers, lists, code blocks, and tables",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:48:26.569Z"
          }
        ],
        "updatedAt": "2026-02-01T16:48:26.569Z"
      },
      {
        "id": "15",
        "title": "Create cove-isolated.md Command File",
        "description": "Create the `/cove-isolated` slash command file that invokes the isolated mode workflow. This command handles flag parsing and argument extraction before invoking the skill workflow.",
        "details": "**Location:** `.claude/commands/cove/cove-isolated.md`\n\n**File Structure:**\n\n1. **Command Description** (lines 1-6)\n   ```\n   Apply Chain-of-Verification (CoVe) with true factored verification using isolated sub-agents.\n   \n   This mode spawns separate sub-agents for each verification question, ensuring they have\n   zero context about the initial answer. Use when maximum accuracy is required.\n\n   Arguments: $ARGUMENTS\n   ```\n\n2. **Flag Documentation** (lines 8-25)\n   Document supported flags before the question:\n\n   | Flag | Effect | Use Case |\n   |------|--------|----------|\n   | (none) | `general-purpose` agent | Default, full tool access |\n   | `--explore` | `Explore` agent | Codebase-related verification |\n   | `--haiku` | Use haiku model | Faster/cheaper verification |\n   | `--agent=<name>` | Custom agent type | User-defined agents |\n\n   **Flag Parsing Rules:**\n   - Flags must appear before the question\n   - Flags start with `--`\n   - `--agent=value` format for custom agents\n   - Unknown flags are treated as part of the question\n   - Flags can be combined in any order\n\n3. **Invocation Logic** (lines 27-50)\n   ```\n   ## Invocation\n\n   **If $ARGUMENTS is provided:**\n   1. Extract any flags from the beginning of $ARGUMENTS\n   2. Apply CoVe isolated verification to the remaining question\n   3. Pass extracted flags to the workflow\n\n   **If $ARGUMENTS is empty:**\n   Apply CoVe isolated verification to the previous response in the conversation.\n   ```\n\n4. **Process Reference** (lines 52-65)\n   ```\n   ## Process\n\n   Invoke the `cove` skill using the `cove-isolated.md` workflow:\n\n   1. Generate Initial Answer (or use previous response if verifying)\n   2. Create 3-5 Verification Questions targeting potential errors\n   3. Spawn isolated sub-agents to answer each question (parallel execution)\n   4. Reconcile findings and produce final verified answer with agent metadata\n   ```\n\n5. **Examples Section** (lines 67-95)\n   ```\n   ## Examples\n\n   Basic isolated verification:\n   ```\n   /cove-isolated What is the default port for PostgreSQL?\n   ```\n\n   Codebase verification with Explore agent:\n   ```\n   /cove-isolated --explore How does the auth middleware work in this project?\n   ```\n\n   Faster verification with haiku model:\n   ```\n   /cove-isolated --haiku What is the speed of light in m/s?\n   ```\n\n   Custom agent type:\n   ```\n   /cove-isolated --agent=general-purpose What is the capital of France?\n   ```\n\n   Combined flags:\n   ```\n   /cove-isolated --haiku --explore What testing pattern does this codebase use?\n   ```\n\n   Verify previous response:\n   ```\n   /cove-isolated\n   ```\n   ```",
        "testStrategy": "**Validation Criteria:**\n1. File exists at `.claude/commands/cove/cove-isolated.md`\n2. Description clearly distinguishes this from standard `/cove` (mentions sub-agents, true isolation)\n3. Flag documentation table is present with all three flags\n4. Flag parsing rules are documented\n5. Invocation section handles both with/without $ARGUMENTS cases\n6. Examples cover all flag variations:\n   - Basic (no flags)\n   - `--explore` flag\n   - `--haiku` flag\n   - `--agent=<name>` flag\n   - Combined flags\n   - Empty arguments (verify previous)\n7. References `cove-isolated.md` workflow (not `cove-process.md`)\n8. File follows same structure as existing `cove.md` command",
        "priority": "high",
        "dependencies": [
          "14"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Write command description and flag documentation section",
            "description": "Create the command header with description of isolated mode and document all supported flags (--explore, --haiku, --agent=<name>) with their effects and use cases in a table format.",
            "dependencies": [],
            "details": "Location: `.claude/commands/cove/cove-isolated.md` lines 1-25\n\n1. Write command description (lines 1-6):\n   - Line 1: 'Apply Chain-of-Verification (CoVe) with true factored verification using isolated sub-agents.'\n   - Lines 2-4: Explain sub-agents have zero context about initial answer\n   - Line 5: 'Use when maximum accuracy is required.'\n   - Line 6: 'Arguments: $ARGUMENTS'\n\n2. Create flag documentation table (lines 8-25):\n   - Section header: '## Flags'\n   - Table with columns: Flag | Effect | Use Case\n   - Row 1: (none) | general-purpose agent | Default, full tool access\n   - Row 2: --explore | Explore agent | Codebase-related verification\n   - Row 3: --haiku | Use haiku model | Faster/cheaper verification\n   - Row 4: --agent=<name> | Custom agent type | User-defined agents\n\n3. Document flag parsing rules (lines 16-25):\n   - Flags must appear before the question\n   - Flags start with --\n   - --agent=value format for custom agents\n   - Unknown flags treated as part of question\n   - Flags can be combined in any order\n\nReference: docs/cove/design.md lines 306-320 for flag specifications\n<info added on 2026-02-01T16:40:08.316Z>\nI'll analyze the codebase to understand the project structure and examine the referenced documentation before generating the subtask update.Now let me check existing command patterns to understand the invocation structure:Now let me check the skill invocation pattern:Based on my analysis of the codebase, I can now generate the new text that should be appended to subtask 15.1's details:\n\n4. Create invocation logic section (lines 27-48):\n   - Section header: '## Invocation'\n   - Parse flags from start of $ARGUMENTS\n   - Extract agent type (default: general-purpose, --explore → Explore, --agent=<name> → custom)\n   - Extract model preference (--haiku sets model: haiku)\n   - Extract question (remaining text after flags)\n   - Invoke cove skill with cove-isolated.md workflow\n   - Pass extracted parameters to workflow\n\n5. Add examples section (lines 50-60):\n   - Section header: '## Examples'\n   - Example 1: '/cove-isolated What is the default port for PostgreSQL?' (default agent)\n   - Example 2: '/cove-isolated --explore How does the auth middleware work?' (Explore agent)\n   - Example 3: '/cove-isolated --haiku What is TCP?' (haiku model)\n   - Example 4: '/cove-isolated --agent=my-verifier What is X?' (custom agent)\n   - Example 5: '/cove-isolated --haiku --explore What pattern does this codebase use?' (combined flags)\n\nDesign reference: docs/cove/design.md lines 306-320 (flag specifications, parsing rules, combinations)\nImplementation reference: docs/cove/implementation.md lines 204-236 (Task 7 requirements, content structure, examples)\nPattern reference: .claude/commands/cove/cove.md (invocation structure), .claude/commands/tm/show/show-task.md (argument parsing patterns)\n</info added on 2026-02-01T16:40:08.316Z>",
            "status": "done",
            "testStrategy": "Verify: (1) Description mentions sub-agents and isolation, (2) Flag table has 4 rows with all flags, (3) Flag parsing rules are complete, (4) Format matches existing commands in .claude/commands/cove/",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:54:48.141Z"
          },
          {
            "id": 2,
            "title": "Implement invocation logic and process reference sections",
            "description": "Write the invocation logic that handles both provided arguments and empty arguments cases, plus the process reference explaining the 4-step workflow with isolated sub-agents.",
            "dependencies": [
              1
            ],
            "details": "Location: `.claude/commands/cove/cove-isolated.md` lines 27-65\n\n1. Create Invocation section (lines 27-50):\n   - Section header: '## Invocation'\n   - If $ARGUMENTS provided case (lines 29-32):\n     a. Extract any flags from beginning of $ARGUMENTS\n     b. Apply CoVe isolated verification to remaining question\n     c. Pass extracted flags to workflow\n   - If $ARGUMENTS empty case (lines 34-36):\n     'Apply CoVe isolated verification to the previous response in the conversation.'\n\n2. Create Process section (lines 52-65):\n   - Section header: '## Process'\n   - Opening: 'Invoke the `cove` skill using the `cove-isolated.md` workflow:'\n   - List 4 steps:\n     1. Generate Initial Answer (or use previous response if verifying)\n     2. Create 3-5 Verification Questions targeting potential errors\n     3. Spawn isolated sub-agents to answer each question (parallel execution)\n     4. Reconcile findings and produce final verified answer with agent metadata\n\nReference: .claude/commands/cove/cove.md for invocation pattern structure",
            "status": "done",
            "testStrategy": "Verify: (1) Invocation handles both $ARGUMENTS cases, (2) Flag extraction logic is documented, (3) Process references cove-isolated.md workflow, (4) All 4 steps are listed with sub-agent mention in step 3",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:54:48.148Z"
          },
          {
            "id": 3,
            "title": "Create comprehensive examples section",
            "description": "Write examples demonstrating all flag combinations and usage patterns, including basic usage, each individual flag, combined flags, and verifying previous responses.",
            "dependencies": [
              2
            ],
            "details": "Location: `.claude/commands/cove/cove-isolated.md` lines 67-95\n\n1. Section header: '## Examples' (line 67)\n\n2. Create 6 examples with explanatory text:\n   - Example 1 (lines 69-72): Basic isolated verification\n     '/cove-isolated What is the default port for PostgreSQL?'\n   \n   - Example 2 (lines 74-77): Codebase verification with Explore agent\n     '/cove-isolated --explore How does the auth middleware work in this project?'\n   \n   - Example 3 (lines 79-82): Faster verification with haiku model\n     '/cove-isolated --haiku What is the speed of light in m/s?'\n   \n   - Example 4 (lines 84-87): Custom agent type\n     '/cove-isolated --agent=general-purpose What is the capital of France?'\n   \n   - Example 5 (lines 89-92): Combined flags\n     '/cove-isolated --haiku --explore What testing pattern does this codebase use?'\n   \n   - Example 6 (lines 93-95): Verify previous response\n     '/cove-isolated'\n\n3. Format each example with:\n   - Descriptive label\n   - Code block with command\n\nReference: docs/cove/implementation.md lines 228-233 for example commands",
            "status": "done",
            "testStrategy": "Verify: (1) All 6 examples present, (2) Each example has descriptive text, (3) Examples cover all flags individually and in combination, (4) Examples match the flag specifications from section 1, (5) Code block formatting is consistent",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T16:54:48.150Z"
          }
        ],
        "updatedAt": "2026-02-01T16:54:48.150Z"
      },
      {
        "id": "16",
        "title": "Update SKILL.md with Dual Mode Documentation",
        "description": "Update the existing SKILL.md entry point to document both standard and isolated verification modes, explaining when to use each and referencing both workflow files.",
        "details": "**Location:** `.claude/skills/cove/SKILL.md`\n\n**Changes to Make:**\n\n1. **Add Verification Modes Section** (insert after \"When to Use This Skill\" section, ~line 35)\n\n   ```markdown\n   ## Verification Modes\n\n   CoVe offers two verification modes to balance accuracy vs. cost:\n\n   ### Standard Mode (`/cove`)\n\n   Uses prompt-based isolation within a single conversation turn.\n\n   - **Token cost:** ~3-5x base tokens\n   - **Isolation:** Best-effort (mental reset instructions)\n   - **Speed:** Faster, single context\n   - **Best for:** Quick fact-checking, cost-sensitive scenarios\n\n   See [cove-process.md](./cove-process.md) for the standard workflow.\n\n   ### Isolated Mode (`/cove-isolated`)\n\n   Uses Claude Code's Task tool to spawn isolated sub-agents for true factored verification.\n\n   - **Token cost:** ~8-15x base tokens\n   - **Isolation:** True (sub-agents have zero context about initial answer)\n   - **Speed:** Parallel execution minimizes latency\n   - **Best for:** High-stakes accuracy, codebase verification\n\n   **Sub-agent customization flags:**\n   | Flag | Effect |\n   |------|--------|\n   | `--explore` | Use Explore agent for codebase verification |\n   | `--haiku` | Use haiku model for faster/cheaper verification |\n   | `--agent=<name>` | Use custom agent type |\n\n   See [cove-isolated.md](./cove-isolated.md) for the isolated workflow.\n\n   ### Mode Selection Guide\n\n   | Use Case | Recommended Mode |\n   |----------|------------------|\n   | Quick fact-checking | `/cove` |\n   | High-stakes accuracy | `/cove-isolated` |\n   | Codebase verification | `/cove-isolated --explore` |\n   | Cost-sensitive verification | `/cove` or `/cove-isolated --haiku` |\n   ```\n\n2. **Update Process Overview Section** (~line 40-50)\n\n   Change from:\n   ```markdown\n   See [cove-process.md](./cove-process.md) for the detailed verification workflow.\n   ```\n\n   To:\n   ```markdown\n   See [cove-process.md](./cove-process.md) for the standard workflow, or \n   [cove-isolated.md](./cove-isolated.md) for the isolated sub-agent workflow.\n   ```\n\n3. **Update Invocation Section** (~line 52-60)\n\n   Add after `/cove` example:\n   ```markdown\n   For isolated verification with sub-agents:\n\n   ```\n   /cove-isolated What is the time complexity of Python's sorted() function?\n   ```\n\n   With flags:\n   ```\n   /cove-isolated --explore How does the auth system work?\n   /cove-isolated --haiku What year was TCP standardized?\n   ```\n   ```\n\n4. **Update Natural Language Invocation** (~line 64-70)\n\n   Add phrases for isolated mode recognition:\n   ```markdown\n   For isolated mode:\n   - \"use isolated verification\"\n   - \"verify with sub-agents\"\n   - \"use factored verification with isolation\"\n   ```",
        "testStrategy": "**Validation Criteria:**\n1. SKILL.md contains new \"Verification Modes\" section\n2. Both modes are documented with characteristics (token cost, isolation level, speed)\n3. Mode selection guide table is present with use case recommendations\n4. Both workflow files are referenced: `cove-process.md` and `cove-isolated.md`\n5. Invocation section includes `/cove-isolated` examples with flags\n6. Natural language triggers include isolated mode phrases\n7. Sub-agent flags table is included (`--explore`, `--haiku`, `--agent=<name>`)\n8. Existing standard mode documentation is preserved (not removed)\n9. File maintains consistent markdown formatting",
        "priority": "medium",
        "dependencies": [
          "14",
          "15"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add Verification Modes section to SKILL.md",
            "description": "Insert new 'Verification Modes' section after 'When to Use This Skill' section (~line 35) documenting both standard and isolated modes with their characteristics, sub-agent flags, and mode selection guide table.",
            "dependencies": [],
            "details": "Insert the new section between line 35 and 36 (after the auto-trigger note and before 'Process Overview').\n\nContent to add:\n- Section header: '## Verification Modes'\n- Standard Mode subsection with token cost (~3-5x), isolation level (best-effort), speed (faster), and reference to cove-process.md\n- Isolated Mode subsection with token cost (~8-15x), isolation level (true), speed (parallel), and reference to cove-isolated.md\n- Sub-agent customization flags table documenting --explore, --haiku, and --agent=<name> flags\n- Mode Selection Guide table with use cases mapped to recommended modes (quick fact-checking → /cove, high-stakes accuracy → /cove-isolated, codebase verification → /cove-isolated --explore, cost-sensitive → /cove or /cove-isolated --haiku)\n\nThis section should be ~35-40 lines of markdown following the format specified in the task details.",
            "status": "done",
            "testStrategy": "1. Verify 'Verification Modes' section exists after line 35 (before 'Process Overview')\n2. Verify both Standard and Isolated mode subsections are present with all characteristics\n3. Verify sub-agent flags table includes all three flags with descriptions\n4. Verify Mode Selection Guide table maps at least 4 use cases to modes\n5. Verify references to both cove-process.md and cove-isolated.md are present",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:30:42.834Z"
          },
          {
            "id": 2,
            "title": "Update Process Overview and Invocation sections with dual-mode references",
            "description": "Update 'Process Overview' section (~line 40-50) to reference both workflow files, and update 'Invocation' section (~line 52-70) with isolated mode examples and natural language triggers for both modes.",
            "dependencies": [
              1
            ],
            "details": "Make three targeted updates to existing sections:\n\n1. **Process Overview section** (~line 45): Change the single workflow reference to reference both files:\n   - Old: 'See [cove-process.md](./cove-process.md) for the detailed verification workflow.'\n   - New: 'See [cove-process.md](./cove-process.md) for the standard workflow, or [cove-isolated.md](./cove-isolated.md) for the isolated sub-agent workflow.'\n\n2. **Invocation section** (~line 55): Add isolated mode command examples after existing /cove example:\n   - Add subsection 'For isolated verification with sub-agents:' with code block showing '/cove-isolated What is the time complexity of Python's sorted() function?'\n   - Add 'With flags:' subsection showing examples with --explore and --haiku flags\n\n3. **Natural Language Invocation section** (~line 70): Add isolated mode trigger phrases after existing standard mode phrases:\n   - 'use isolated verification'\n   - 'verify with sub-agents'\n   - 'use factored verification with isolation'\n\nMaintain existing formatting and structure, only adding new content without removing existing documentation.",
            "status": "done",
            "testStrategy": "1. Verify Process Overview section references both cove-process.md and cove-isolated.md\n2. Verify Invocation section includes /cove-isolated example with basic usage\n3. Verify Invocation section includes flag examples (--explore and --haiku)\n4. Verify Natural Language Invocation section includes at least 3 isolated mode trigger phrases\n5. Verify all existing content is preserved and no sections were removed",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:30:42.837Z"
          }
        ],
        "updatedAt": "2026-02-01T17:30:42.837Z"
      },
      {
        "id": "17",
        "title": "Validate Isolated Mode Implementation",
        "description": "Verify the isolated mode implementation is complete, files are correctly structured, and the workflow functions as designed. This includes reviewing file locations, content accuracy, cross-references, and ensuring error handling is properly documented.",
        "details": "**Validation Steps:**\n\n1. **File Existence Verification**\n   - [ ] `.claude/skills/cove/cove-isolated.md` exists\n   - [ ] `.claude/commands/cove/cove-isolated.md` exists\n   - [ ] `.claude/skills/cove/SKILL.md` updated\n\n2. **Content Accuracy Review**\n\n   **cove-isolated.md workflow:**\n   - [ ] 4-step workflow structure matches standard mode\n   - [ ] Sub-agent prompt template contains ONLY verification question (no initial answer)\n   - [ ] Task tool usage instructions are complete:\n     - [ ] `subagent_type` parameter documented\n     - [ ] `model` parameter documented (for `--haiku`)\n     - [ ] `prompt` parameter documented\n     - [ ] `description` parameter documented\n   - [ ] Parallel execution is explicitly instructed (single message with multiple Task calls)\n   - [ ] Flag parsing covers all three flags with examples\n   - [ ] Output format includes agent metadata (Agent, Status, Source)\n   - [ ] Error handling section covers:\n     - [ ] Sub-agent timeout → \"Inconclusive\"\n     - [ ] Sub-agent failure → fall back to standard mode for that question\n     - [ ] All failures → abort and suggest `/cove`\n\n   **cove-isolated.md command:**\n   - [ ] References `cove-isolated.md` workflow (not `cove-process.md`)\n   - [ ] Flag parsing rules documented\n   - [ ] Examples for all flag combinations present\n   - [ ] Handles empty $ARGUMENTS (verify previous response)\n\n   **SKILL.md updates:**\n   - [ ] New \"Verification Modes\" section present\n   - [ ] Both modes documented with characteristics\n   - [ ] Mode selection guide table present\n   - [ ] Both workflow files referenced\n   - [ ] Isolated mode invocation examples present\n\n3. **Cross-Reference Validation**\n   - [ ] SKILL.md → cove-isolated.md link works\n   - [ ] Command → workflow reference is correct\n   - [ ] No broken internal links\n\n4. **Design Compliance Check**\n   Compare implementation against `docs/cove/design.md`:\n   - [ ] Sub-agent architecture matches design diagram\n   - [ ] Flag behavior matches specification\n   - [ ] Output format matches isolated mode template\n   - [ ] Error handling matches design specification\n\n5. **Standard Mode Preservation**\n   - [ ] `/cove` command unchanged\n   - [ ] `cove-process.md` unchanged\n   - [ ] Standard mode still works independently\n\n**Manual Test Scenarios** (document expected behavior):\n\n1. **Basic isolated verification:**\n   ```\n   /cove-isolated What is the default port for PostgreSQL?\n   ```\n   Expected: 3 sub-agents spawned in parallel, output shows agent metadata\n\n2. **With --explore flag:**\n   ```\n   /cove-isolated --explore How does error handling work in this codebase?\n   ```\n   Expected: Explore agents used for verification\n\n3. **With --haiku flag:**\n   ```\n   /cove-isolated --haiku What is the speed of light?\n   ```\n   Expected: Haiku model used (faster responses)\n\n4. **Combined flags:**\n   ```\n   /cove-isolated --haiku --explore What testing pattern does this use?\n   ```\n   Expected: Explore agent with haiku model\n\n5. **Verify previous response:**\n   ```\n   User: What year was Python released?\n   Claude: [response]\n   User: /cove-isolated\n   ```\n   Expected: Isolated verification applied to previous answer",
        "testStrategy": "**Acceptance Criteria:**\n1. All files exist in correct locations\n2. All checklist items in validation steps pass\n3. Cross-references between files are valid\n4. Implementation matches design specification in `docs/cove/design.md`\n5. Standard mode (`/cove`) functionality is unaffected\n6. No syntax errors in markdown files\n7. Documentation is clear enough for a user unfamiliar with the implementation",
        "priority": "medium",
        "dependencies": [
          "14",
          "15",
          "16"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Verify file existence and content accuracy",
            "description": "Validate that all required files exist in the correct locations and their content matches the design specification. This includes checking file structure, workflow steps, flag parsing logic, Task tool parameters, output format templates, and error handling documentation.",
            "dependencies": [],
            "details": "**File Existence Checks:**\n\n1. Verify `.github/templates/claude/skills/cove/cove-isolated.md` exists\n2. Verify `.github/templates/claude/commands/cove/cove-isolated.md` exists\n3. Verify `.github/templates/claude/skills/cove/SKILL.md` has been updated\n\n**Content Validation for cove-isolated.md (workflow):**\n\n1. **Workflow structure:**\n   - Confirm 4-step workflow structure matches standard mode (Initial Answer, Verification Questions, Independent Verification, Reconciliation)\n   - Verify workflow checklist is present\n\n2. **Sub-agent prompt template (Step 3):**\n   - Verify sub-agent prompt contains ONLY the verification question\n   - Confirm NO initial answer context is included\n   - Check instructions for tool usage and source citation are present\n\n3. **Task tool usage documentation:**\n   - Verify `subagent_type` parameter is documented with flag-to-agent mapping\n   - Verify `model` parameter is documented (for `--haiku` flag)\n   - Verify `prompt` parameter is documented with sub-agent template reference\n   - Verify `description` parameter is documented\n   - Confirm parallel execution is explicitly instructed (single message with multiple Task calls)\n\n4. **Flag parsing:**\n   - Verify all three flags documented: `--explore`, `--haiku`, `--agent=<name>`\n   - Check flag parsing rules are clear\n   - Verify examples for each flag combination\n\n5. **Output format:**\n   - Verify agent metadata is included (Agent type, Status)\n   - Verify source citations are included\n   - Check reconciliation table format is present\n\n6. **Error handling:**\n   - Verify sub-agent timeout handling (mark as \"Inconclusive\")\n   - Verify sub-agent failure handling (fall back to standard mode for that question)\n   - Verify all-failures handling (suggest using `/cove` instead)\n\n**Content Validation for cove-isolated.md (command):**\n\n1. Verify description mentions sub-agents and true isolation\n2. Verify command references `cove-isolated.md` workflow (not `cove-process.md`)\n3. Check flag parsing rules are documented\n4. Verify examples for all flag combinations are present\n5. Confirm empty $ARGUMENTS handling (verify previous response)\n\n**SKILL.md Update Validation:**\n\n1. Verify \"Verification Modes\" section exists\n2. Check both modes (standard and isolated) are documented\n3. Verify mode selection guidance is present\n4. Confirm links to both `cove-process.md` and `cove-isolated.md` exist\n5. Verify isolated mode invocation examples are present\n\n**Standard Mode Preservation:**\n\n1. Verify `/cove` command is unchanged from current version\n2. Verify `cove-process.md` is unchanged from current version\n3. Confirm standard mode can still work independently",
            "status": "done",
            "testStrategy": "Use Read tool to examine each file and verify content against design specification from `docs/cove/design.md`. Use Grep to search for key terms and patterns. Create a validation report documenting all checked items with pass/fail status.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:34:18.636Z"
          },
          {
            "id": 2,
            "title": "Validate cross-references and document test scenarios",
            "description": "Ensure all internal links between files work correctly, the implementation matches the design specification, and all manual test scenarios are properly documented with expected behavior.",
            "dependencies": [
              1
            ],
            "details": "**Cross-Reference Validation:**\n\n1. **SKILL.md links:**\n   - Verify link to `cove-isolated.md` works and points to correct file\n   - Verify link to `cove-process.md` still works\n   - Check for any broken internal links\n\n2. **Command to workflow references:**\n   - Verify `/cove-isolated` command correctly references `cove-isolated.md` workflow\n   - Verify `/cove` command still correctly references `cove-process.md` workflow\n\n**Design Compliance Check:**\n\nCompare implementation against `docs/cove/design.md`:\n\n1. **Architecture:**\n   - Verify sub-agent architecture matches design diagram (main orchestrator spawns isolated sub-agents)\n   - Confirm parallel execution is implemented as designed\n\n2. **Flag behavior:**\n   - Verify `--explore` maps to Explore agent\n   - Verify `--haiku` sets model parameter\n   - Verify `--agent=<name>` allows custom agents\n   - Confirm flag combinations work as specified\n\n3. **Output format:**\n   - Verify isolated mode output matches the template in design.md\n   - Check agent metadata format (Agent, Status, Source)\n   - Verify reconciliation table format\n\n4. **Error handling:**\n   - Confirm timeout behavior matches design\n   - Verify failure fallback matches design\n   - Check all-failures abort logic\n\n**Manual Test Scenarios Documentation:**\n\nCreate comprehensive test scenario documentation in validation report:\n\n1. **Basic isolated verification:**\n   - Command: `/cove-isolated What is the default port for PostgreSQL?`\n   - Expected: 3 sub-agents spawned in parallel using general-purpose agent\n   - Expected output: Agent metadata shown, status indicators, source citations\n\n2. **Explore flag test:**\n   - Command: `/cove-isolated --explore How does error handling work in this codebase?`\n   - Expected: Explore agents used for verification\n   - Expected output: Codebase-specific verification with file references\n\n3. **Haiku flag test:**\n   - Command: `/cove-isolated --haiku What is the speed of light?`\n   - Expected: Haiku model used for faster/cheaper responses\n   - Expected output: Faster completion, agent shows haiku model\n\n4. **Combined flags test:**\n   - Command: `/cove-isolated --haiku --explore What testing pattern does this use?`\n   - Expected: Explore agent with haiku model\n   - Expected output: Codebase analysis with haiku model efficiency\n\n5. **Verify previous response:**\n   - Interaction:\n     ```\n     User: What year was Python released?\n     Claude: [provides answer]\n     User: /cove-isolated\n     ```\n   - Expected: Isolated verification applied to previous answer about Python\n   - Expected output: Full isolated verification workflow on previous response\n\n6. **Custom agent test:**\n   - Command: `/cove-isolated --agent=general-purpose What is TCP?`\n   - Expected: Uses specified agent type explicitly\n\n7. **Error scenario tests:**\n   - Document expected behavior for sub-agent timeout\n   - Document expected behavior for sub-agent failure (single)\n   - Document expected behavior for all sub-agents failing\n\n**Final Validation Report:**\n\nCreate a structured validation report documenting:\n- All checklist items with pass/fail status\n- Any discrepancies found between implementation and design\n- Test scenarios with expected vs actual behavior\n- Recommendations for any needed corrections",
            "status": "done",
            "testStrategy": "Manually trace through all internal links using Read tool. Compare implementation line-by-line against design.md. Document each test scenario with clear expected behavior. Create a final validation report in `.taskmaster/reports/task-17-validation-report.md` with all findings.",
            "parentId": "undefined",
            "updatedAt": "2026-02-01T17:34:18.638Z"
          }
        ],
        "updatedAt": "2026-02-01T17:34:18.638Z"
      },
      {
        "id": "18",
        "title": "Add Sync Exclusions Globals and is_excluded() Function",
        "description": "Add the foundational globals (SYNC_EXCLUSIONS and EXCLUDED_FILES arrays) and implement the core is_excluded() helper function that performs glob pattern matching using bash case statements.",
        "details": "**File**: `.github/scripts/template-sync.sh`\n\n**Step 1 - Add Global Variables** (after line 73, where UNCHANGED_FILES=() is declared):\n```bash\n# Exclusion tracking arrays\nEXCLUDED_FILES=()\nSYNC_EXCLUSIONS=()\n```\n\n**Step 2 - Implement is_excluded() Function** (in Helper Functions section, after format_languages_yaml() around line 148):\n```bash\n# is_excluded()\n# Checks if a file path matches any exclusion pattern.\n#\n# Args:\n#   $1 - Project-relative file path (e.g., \".claude/commands/cove/cove.md\")\n#\n# Returns:\n#   0 if path matches an exclusion pattern (excluded)\n#   1 if path does not match any pattern (not excluded)\n#\n# Note: Uses bash case statement glob matching where * matches any characters including /\nis_excluded() {\n  local path=\"$1\"\n  \n  # If no exclusions configured, nothing is excluded\n  if [[ ${#SYNC_EXCLUSIONS[@]} -eq 0 ]]; then\n    return 1\n  fi\n  \n  local pattern\n  for pattern in \"${SYNC_EXCLUSIONS[@]}\"; do\n    # IMPORTANT: pattern must be unquoted for glob expansion in case\n    case \"$path\" in\n      $pattern)\n        return 0  # Excluded\n        ;;\n    esac\n  done\n  \n  return 1  # Not excluded\n}\n```\n\n**Key Implementation Notes**:\n- The pattern variable MUST be unquoted in the case clause (`$pattern` not `\"$pattern\"`) for bash to perform glob expansion\n- In bash `case` statements, `*` matches any string including `/` characters (unlike `ls` globs)\n- Early return if SYNC_EXCLUSIONS is empty to avoid unnecessary iteration",
        "testStrategy": "Unit tests for is_excluded():\n1. `is_excluded` returns 1 (false) when SYNC_EXCLUSIONS=() - verify no patterns means nothing excluded\n2. `is_excluded` returns 0 (true) for exact path match - set pattern \".claude/commands/cove/cove.md\", test with same path\n3. `is_excluded` returns 0 for glob wildcard match - set pattern \".claude/commands/cove/*\", test with \".claude/commands/cove/cove.md\"\n4. `is_excluded` returns 1 for non-matching path - set pattern \".claude/commands/cove/*\", test with \".claude/commands/tm/list.md\"\n5. `is_excluded` matches across directory separators - set pattern \".claude/commands/cove/*\", test with \".claude/commands/cove/subdir/file.md\"\n\nAll tests follow existing test/test-template-sync.sh patterns using log_test, reset_globals, assert_equals/assert_not_equals.",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add EXCLUDED_FILES and SYNC_EXCLUSIONS global arrays",
            "description": "Declare the two new global tracking arrays in the Global Configuration section of template-sync.sh, after the existing file change tracking arrays (line 73).",
            "dependencies": [],
            "details": "Add the following two lines after line 73 (after UNCHANGED_FILES=() declaration) in `.github/scripts/template-sync.sh`:\n\n```bash\n# Exclusion tracking arrays\nEXCLUDED_FILES=()\nSYNC_EXCLUSIONS=()\n```\n\nThis follows the existing pattern of the file tracking arrays (ADDED_FILES, MODIFIED_FILES, DELETED_FILES, UNCHANGED_FILES). The EXCLUDED_FILES array will track paths that matched exclusion patterns during file comparison. The SYNC_EXCLUSIONS array will hold glob patterns loaded from the manifest.\n<info added on 2026-02-08T13:54:19.371Z>\nI'll analyze the codebase to understand the project structure and gather relevant information for this subtask update.Now I'll generate the text that should be appended to the subtask's details based on the user's request to reference the design and implementation documents:\n\n**Design Reference**: See `docs/template-sync/sync-exclusions/design.md` - \"Core Logic\" section (lines 87-100) describes the `is_excluded()` function specification: iterates over SYNC_EXCLUSIONS array, uses bash `case` statement for glob matching, returns 0 (true) on match or 1 (false) when no match. The function accesses global arrays directly to avoid bash array-passing complexity. \"Architecture\" section (lines 27-46) shows the data flow: manifest patterns → read_manifest() → SYNC_EXCLUSIONS array → compare_files() → is_excluded() checks → EXCLUDED_FILES tracking.\n\n**Implementation Reference**: See `docs/template-sync/sync-exclusions/implementation.md` - Task 1 (lines 40-60) specifies exact placement for the global arrays: after line 73 (after `UNCHANGED_FILES=()` declaration) in the Global Configuration section. Task 2 (lines 62-79) provides implementation notes for `is_excluded()`: place after `format_languages_yaml()` around line 148, use unquoted pattern in case clause for glob expansion, return immediately with exit code 1 if SYNC_EXCLUSIONS is empty.\n\n**Context Verification**: Current code shows `UNCHANGED_FILES=()` at line 73, `format_languages_yaml()` function at lines 139-148, confirming the exact injection points specified in the implementation plan.\n</info added on 2026-02-08T13:54:19.371Z>",
            "status": "pending",
            "testStrategy": "Verify the arrays are properly declared by sourcing the script and checking that `declare -p EXCLUDED_FILES SYNC_EXCLUSIONS` outputs array declarations without error. Confirm arrays are empty by default with `[[ ${#EXCLUDED_FILES[@]} -eq 0 && ${#SYNC_EXCLUSIONS[@]} -eq 0 ]]`.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement is_excluded() helper function with glob matching",
            "description": "Add the is_excluded() function in the Helper Functions section (after format_languages_yaml() around line 148) that performs glob pattern matching using bash case statements.",
            "dependencies": [
              1
            ],
            "details": "Insert the is_excluded() function after line 148 (after format_languages_yaml() function), before the Dependency Check section. Implementation:\n\n```bash\n# is_excluded()\n# Checks if a file path matches any exclusion pattern.\n#\n# Args:\n#   $1 - Project-relative file path (e.g., \".claude/commands/cove/cove.md\")\n#\n# Returns:\n#   0 if path matches an exclusion pattern (excluded)\n#   1 if path does not match any pattern (not excluded)\n#\n# Note: Uses bash case statement glob matching where * matches any characters including /\nis_excluded() {\n  local path=\"$1\"\n  \n  # If no exclusions configured, nothing is excluded\n  if [[ ${#SYNC_EXCLUSIONS[@]} -eq 0 ]]; then\n    return 1\n  fi\n  \n  local pattern\n  for pattern in \"${SYNC_EXCLUSIONS[@]}\"; do\n    # IMPORTANT: pattern must be unquoted for glob expansion in case\n    case \"$path\" in\n      $pattern)\n        return 0  # Excluded\n        ;;\n    esac\n  done\n  \n  return 1  # Not excluded\n}\n```\n\nCRITICAL: The `$pattern` variable MUST be unquoted in the case clause for bash glob expansion to work.\n<info added on 2026-02-08T13:54:39.145Z>\nI need to analyze the project structure to understand the context and read the referenced documentation files.Based on my analysis of the design document and implementation plan, the user wants me to reference the documentation for the `is_excluded()` function implementation. The design doc's \"Core Logic: is_excluded() Function\" section is at lines 87-99 of `design.md`, and the implementation plan's Task 2 is at lines 62-78 of `implementation.md`.\n\nThe current subtask already has the complete implementation with the critical unquoted pattern note. The user request is asking me to add documentation references to these source materials.\n\n**Design reference: docs/template-sync/sync-exclusions/design.md lines 87-99 (\"Core Logic: is_excluded() Function\" section) specifies the algorithm - iterate over SYNC_EXCLUSIONS array, use bash case for glob matching with * matching slashes, return true (0) on match or false (1) otherwise. Implementation reference: docs/template-sync/sync-exclusions/implementation.md lines 62-78 (Task 2) details the location (after format_languages_yaml() at line 148), parameter (project-relative path), use of case statement, and critical requirement that glob pattern must be unquoted in case clause for bash expansion.**\n</info added on 2026-02-08T13:54:39.145Z>",
            "status": "pending",
            "testStrategy": "Test cases:\n1. Empty SYNC_EXCLUSIONS returns 1 (not excluded)\n2. Exact path match \".claude/commands/cove/cove.md\" with pattern \".claude/commands/cove/cove.md\" returns 0\n3. Glob wildcard \".claude/commands/cove/*\" matches \".claude/commands/cove/cove.md\" returns 0\n4. Non-matching path \".claude/commands/tm/list.md\" with pattern \".claude/commands/cove/*\" returns 1\n5. Pattern matches across directory separators (bash case * crosses /) - \".claude/commands/cove/*\" matches \".claude/commands/cove/subdir/file.md\"",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Update reset_globals() function in tests to include new arrays",
            "description": "Modify the reset_globals() helper function in test/test-template-sync.sh to reset EXCLUDED_FILES and SYNC_EXCLUSIONS arrays, ensuring clean state between tests.",
            "dependencies": [
              1
            ],
            "details": "Update the reset_globals() function in `test/test-template-sync.sh` (around line 25-31) to include the new global arrays:\n\n```bash\nreset_globals() {\n  MANIFEST_PATH=\".github/template-state.json\"\n  STAGING_DIR=\"\"\n  DRY_RUN=false\n  CI_MODE=false\n  TARGET_VERSION=\"latest\"\n  # Reset exclusion tracking arrays\n  EXCLUDED_FILES=()\n  SYNC_EXCLUSIONS=()\n}\n```\n\nThis ensures that each test starts with a clean slate for the exclusion-related globals, preventing state leakage between tests.",
            "status": "pending",
            "testStrategy": "Verify by running existing tests with `./test/test-template-sync.sh` - they should all pass without modification. Then add a simple test that sets SYNC_EXCLUSIONS, calls reset_globals, and verifies SYNC_EXCLUSIONS is empty again.",
            "parentId": "undefined"
          },
          {
            "id": 4,
            "title": "Write unit tests for is_excluded() function",
            "description": "Add a new test section in test/test-template-sync.sh with comprehensive unit tests for the is_excluded() function covering empty patterns, exact matches, glob wildcards, and non-matches.",
            "dependencies": [
              2,
              3
            ],
            "details": "Add a new test section before `print_summary` in `test/test-template-sync.sh`. Section header: \"Section 10: Sync Exclusion - is_excluded() Tests\"\n\nTests to implement:\n1. `is_excluded` returns 1 (not excluded) when SYNC_EXCLUSIONS is empty\n2. `is_excluded` returns 0 (excluded) for exact path match\n3. `is_excluded` returns 0 for glob pattern with trailing wildcard `.claude/commands/cove/*`\n4. `is_excluded` returns 1 for non-matching path\n5. `is_excluded` matches across directory separators (bash case * crosses /)\n6. `is_excluded` handles multiple patterns (second pattern matches)\n\nPattern for each test:\n```bash\nlog_test \"is_excluded returns 1 when no exclusions configured\"\nreset_globals\nSYNC_EXCLUSIONS=()\nis_excluded \".claude/settings.json\"\nexit_code=$?\nassert_equals \"1\" \"$exit_code\" \"No exclusions means not excluded\"\n```",
            "status": "pending",
            "testStrategy": "Run `./test/test-template-sync.sh` and verify all new tests pass. Check test output shows proper section header and individual test results. Verify tests properly use reset_globals before each test.",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T14:54:10.660Z"
      },
      {
        "id": "19",
        "title": "Load and Validate sync_exclusions in Manifest Functions",
        "description": "Extend read_manifest() to load sync_exclusions patterns into the SYNC_EXCLUSIONS array using mapfile/jq, and extend validate_manifest() to validate the field structure when present.",
        "details": "**File**: `.github/scripts/template-sync.sh`\n\n**Step 1 - Update read_manifest()** (at end of function, after line 241 `log_info \"Manifest loaded: $MANIFEST_PATH\"`):\n```bash\n  # Load sync exclusions if present (optional field)\n  if jq -e '.sync_exclusions' \"$MANIFEST_PATH\" &>/dev/null; then\n    mapfile -t SYNC_EXCLUSIONS < <(jq -r '.sync_exclusions[]' \"$MANIFEST_PATH\")\n    if [[ ${#SYNC_EXCLUSIONS[@]} -gt 0 ]]; then\n      log_info \"Loaded ${#SYNC_EXCLUSIONS[@]} sync exclusion pattern(s)\"\n    fi\n  fi\n```\n\n**Step 2 - Update validate_manifest()** (before line 298 `log_success \"Manifest validation passed\"`):\n```bash\n  # Validate sync_exclusions if present (optional field)\n  if jq -e '.sync_exclusions' \"$MANIFEST_PATH\" &>/dev/null; then\n    # Must be an array\n    if ! jq -e '.sync_exclusions | type == \"array\"' \"$MANIFEST_PATH\" &>/dev/null; then\n      log_error \"sync_exclusions must be an array\"\n      exit 1\n    fi\n    # All elements must be strings\n    if ! jq -e '.sync_exclusions | all(type == \"string\")' \"$MANIFEST_PATH\" &>/dev/null; then\n      log_error \"All sync_exclusions elements must be strings\"\n      exit 1\n    fi\n  fi\n```\n\n**Step 3 - Update reset_globals() in test file** (test/test-template-sync.sh around line 25-31):\n```bash\nreset_globals() {\n  MANIFEST_PATH=\".github/template-state.json\"\n  STAGING_DIR=\"\"\n  DRY_RUN=false\n  CI_MODE=false\n  TARGET_VERSION=\"latest\"\n  EXCLUDED_FILES=()      # Add this\n  SYNC_EXCLUSIONS=()     # Add this\n}\n```\n\n**Key Implementation Notes**:\n- `mapfile -t` safely converts newline-delimited jq output to bash array, handling spaces in patterns\n- The field is optional; if absent, SYNC_EXCLUSIONS remains empty from global initialization\n- `jq -e` returns non-zero exit code if expression evaluates to null/false, perfect for existence checks",
        "testStrategy": "Integration tests for manifest handling:\n1. `read_manifest` loads exclusions - use fixture with sync_exclusions, verify SYNC_EXCLUSIONS array populated correctly\n2. `read_manifest` handles missing field - use existing valid-manifest.json (no sync_exclusions), verify SYNC_EXCLUSIONS is empty array\n3. `validate_manifest` accepts valid exclusions - use fixture with valid sync_exclusions array, verify exit code 0\n4. `validate_manifest` accepts manifest without exclusions - use existing valid-manifest.json, verify exit code 0\n5. Create test fixture `test/fixtures/manifests/valid-manifest-with-exclusions.json` containing sync_exclusions: [\".claude/commands/cove/*\", \".claude/skills/cove/*\"]",
        "priority": "high",
        "dependencies": [
          "18"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Update read_manifest() to Load sync_exclusions Patterns",
            "description": "Add code at the end of read_manifest() function to load the optional sync_exclusions array from the manifest JSON into the SYNC_EXCLUSIONS bash array using mapfile and jq.",
            "dependencies": [],
            "details": "Insert the following code block after line 241 (`log_info \"Manifest loaded: $MANIFEST_PATH\"`) and before the closing brace of read_manifest():\n\n```bash\n  # Load sync exclusions if present (optional field)\n  if jq -e '.sync_exclusions' \"$MANIFEST_PATH\" &>/dev/null; then\n    mapfile -t SYNC_EXCLUSIONS < <(jq -r '.sync_exclusions[]' \"$MANIFEST_PATH\")\n    if [[ ${#SYNC_EXCLUSIONS[@]} -gt 0 ]]; then\n      log_info \"Loaded ${#SYNC_EXCLUSIONS[@]} sync exclusion pattern(s)\"\n    fi\n  fi\n```\n\nKey implementation notes:\n- `jq -e '.sync_exclusions'` returns non-zero if the field doesn't exist, making it perfect for existence checks\n- `mapfile -t SYNC_EXCLUSIONS` safely converts newline-delimited jq output to a bash array, correctly handling spaces in patterns\n- Only log the count when patterns were actually loaded (N > 0)\n- If the field is absent, SYNC_EXCLUSIONS remains empty from global initialization (Task 18)\n<info added on 2026-02-08T13:54:56.737Z>\nI'll analyze the codebase to understand the current implementation and provide an accurate reference to the implementation plan.Now let me check the specific section for Task 3:Based on my analysis of the implementation plan document, here is the text that should be added to the subtask:\n\n---\n\nImplementation plan detailed in `docs/template-sync/sync-exclusions/implementation.md` Task 3 (lines 81-95). The implementation notes specify:\n- Use `jq -e '.sync_exclusions'` to check field existence\n- Use `mapfile -t SYNC_EXCLUSIONS < <(jq -r '.sync_exclusions[]' \"$MANIFEST_PATH\")` to safely load the array\n- `mapfile` handles spaces in patterns correctly by treating each line as one array element\n- If field doesn't exist, SYNC_EXCLUSIONS remains empty from global initialization\n- Log count only when N > 0\n</info added on 2026-02-08T13:54:56.737Z>",
            "status": "pending",
            "testStrategy": "1. Use fixture with sync_exclusions (valid-manifest-with-exclusions.json), call read_manifest(), verify SYNC_EXCLUSIONS array is populated with correct values. 2. Use existing valid-manifest.json (no sync_exclusions), call read_manifest(), verify SYNC_EXCLUSIONS remains an empty array.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Update validate_manifest() to Validate sync_exclusions Field Structure",
            "description": "Add validation logic at the end of validate_manifest() to ensure sync_exclusions is an array of strings when present, rejecting invalid types with descriptive error messages.",
            "dependencies": [
              1
            ],
            "details": "Insert the following code block before line 298 (`log_success \"Manifest validation passed\"`):\n\n```bash\n  # Validate sync_exclusions if present (optional field)\n  if jq -e '.sync_exclusions' \"$MANIFEST_PATH\" &>/dev/null; then\n    # Must be an array\n    if ! jq -e '.sync_exclusions | type == \"array\"' \"$MANIFEST_PATH\" &>/dev/null; then\n      log_error \"sync_exclusions must be an array\"\n      exit 1\n    fi\n    # All elements must be strings\n    if ! jq -e '.sync_exclusions | all(type == \"string\")' \"$MANIFEST_PATH\" &>/dev/null; then\n      log_error \"All sync_exclusions elements must be strings\"\n      exit 1\n    fi\n  fi\n```\n\nKey implementation notes:\n- The field is optional; validation is skipped if absent\n- First check ensures the field is an array type (not a string, object, etc.)\n- Second check ensures all array elements are strings (no nested objects/arrays/numbers)\n- Both checks use `jq -e` which returns non-zero for null/false results\n- Error messages are descriptive to help users fix manifest issues\n<info added on 2026-02-08T13:55:15.862Z>\nI'll analyze the codebase to understand the current implementation and then provide the appropriate reference documentation context.Based on the design document (section \"Validation\" at lines 135-141) and implementation plan (Task 4 at lines 98-112), this subtask implements manifest validation for the `sync_exclusions` field. The implementation correctly follows the specification:\n\n**Design Requirements (design.md:135-141):**\n- Validate only when field is present (optional)\n- Must be a JSON array\n- All elements must be strings\n- Empty array is valid\n- Missing field is valid\n\n**Implementation Specification (implementation.md:98-112):**\n- Location: End of `validate_manifest()`, before line 298\n- Use `jq -e '.sync_exclusions'` to check existence\n- Check array type: `jq -e '.sync_exclusions | type == \"array\"'`\n- Check all strings: `jq -e '.sync_exclusions | all(type == \"string\")'`\n- Error handling with descriptive messages\n- Skip validation if absent\n\nDesign document section: \"Validation\" (lines 135-141). Implementation specification: Task 4 in implementation.md (lines 98-112). This subtask validates that sync_exclusions, when present in the manifest, is a properly structured array of strings, rejecting manifests with invalid field types (non-array) or invalid element types (non-string).\n</info added on 2026-02-08T13:55:15.862Z>",
            "status": "pending",
            "testStrategy": "1. Create fixture with valid sync_exclusions array, run validate_manifest(), assert success (exit 0). 2. Create fixture with sync_exclusions as a string (not array), assert exit 1. 3. Create fixture with sync_exclusions containing a number, assert exit 1. 4. Use existing valid-manifest.json (no sync_exclusions), run validate_manifest(), assert success.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Update reset_globals() in Test File to Include New Arrays",
            "description": "Extend the reset_globals() helper function in test/test-template-sync.sh to reset the EXCLUDED_FILES and SYNC_EXCLUSIONS arrays, ensuring clean state between tests.",
            "dependencies": [
              1,
              2
            ],
            "details": "Modify reset_globals() at lines 25-31 in test/test-template-sync.sh to include the two new global arrays:\n\n```bash\nreset_globals() {\n  MANIFEST_PATH=\".github/template-state.json\"\n  STAGING_DIR=\"\"\n  DRY_RUN=false\n  CI_MODE=false\n  TARGET_VERSION=\"latest\"\n  EXCLUDED_FILES=()      # Add this line - tracks excluded file paths during compare\n  SYNC_EXCLUSIONS=()     # Add this line - stores patterns loaded from manifest\n}\n```\n\nKey implementation notes:\n- EXCLUDED_FILES=() resets the array that tracks files excluded during compare_files()\n- SYNC_EXCLUSIONS=() resets the array that stores patterns from the manifest\n- Both must be reset to empty arrays (not unset) to match their global initialization in template-sync.sh\n- This ensures each test starts with clean state and doesn't inherit patterns/files from previous tests\n- The existing file comparison tests will work correctly once these globals exist in template-sync.sh (from Task 18)",
            "status": "pending",
            "testStrategy": "1. Run the full test suite after making the change to verify no regressions. 2. Verify that tests using reset_globals() properly reset both new arrays to empty. 3. Add a specific test that sets SYNC_EXCLUSIONS, calls reset_globals(), and verifies it's empty.",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T15:01:59.400Z"
      },
      {
        "id": "20",
        "title": "Integrate Exclusion Logic into compare_files()",
        "description": "Modify compare_files() to filter excluded files at two injection points: the staging file walk (prevents ADDED/MODIFIED categorization) and the project file walk (prevents DELETED flagging). Track excluded files in EXCLUDED_FILES array.",
        "details": "**File**: `.github/scripts/template-sync.sh`\n\n**Step 1 - Reset EXCLUDED_FILES in compare_files()** (add at beginning with other array resets around line 688):\n```bash\n  EXCLUDED_FILES=()\n```\n\n**Step 2 - Injection Point 1: Staging file walk** (after line 722 where display_path is constructed, before the if block on line 724):\n```bash\n      local display_path=\"$project_dir/$relative_path\"\n      \n      # Check exclusion before categorization\n      if is_excluded \"$display_path\"; then\n        EXCLUDED_FILES+=(\"$display_path\")\n        continue\n      fi\n      \n      if [[ ! -f \"$project_file\" ]]; then\n```\n\n**Step 3 - Injection Point 2: Project file walk** (after line 755 where display_path is constructed, before the if block on line 757):\n```bash\n        local display_path=\"$project_dir/$relative_path\"\n        \n        # Skip excluded files in deletion detection (don't add to EXCLUDED_FILES to avoid double-counting)\n        if is_excluded \"$display_path\"; then\n          continue\n        fi\n        \n        if [[ ! -f \"$staging_file\" ]]; then\n```\n\n**Step 4 - Update summary log on line 765** to include excluded count:\n```bash\n  log_success \"Comparison complete: ${#ADDED_FILES[@]} added, ${#MODIFIED_FILES[@]} modified, ${#DELETED_FILES[@]} deleted, ${#UNCHANGED_FILES[@]} unchanged, ${#EXCLUDED_FILES[@]} excluded\"\n```\n\n**Key Implementation Notes**:\n- Excluded files never trigger `diff` operations (performance benefit)\n- Only add to EXCLUDED_FILES in staging walk to avoid double-counting\n- In project walk, just `continue` without recording - this prevents duplicates for files existing in both places\n- The exclusion check uses display_path which is already the project-relative path matching user's pattern format",
        "testStrategy": "Integration tests for compare_files() with exclusions:\n1. Excludes matching files from ADDED - create staging with file matching exclusion, empty project dir, verify file in EXCLUDED_FILES not ADDED_FILES\n2. Excludes matching files from MODIFIED - create staging and project with same file (different content) matching exclusion, verify file in EXCLUDED_FILES not MODIFIED_FILES\n3. Skips excluded files in deletion detection - create project with file matching exclusion (not in staging), verify NOT in DELETED_FILES\n4. Non-excluded files still categorized normally - verify files not matching patterns are still in ADDED/MODIFIED/DELETED as appropriate\n5. Multiple exclusion patterns work - set multiple patterns, verify each filters correctly\n\nTest setup follows existing compare_files test patterns: create_temp_dir, pushd/popd for working directory, set SYNC_EXCLUSIONS before calling compare_files.",
        "priority": "high",
        "dependencies": [
          "18",
          "19"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Initialize EXCLUDED_FILES Array Reset in compare_files()",
            "description": "Add the EXCLUDED_FILES array reset at the beginning of compare_files() function alongside the existing array resets (ADDED_FILES, MODIFIED_FILES, DELETED_FILES, UNCHANGED_FILES) to ensure clean state for each comparison run.",
            "dependencies": [],
            "details": "At line 691 in compare_files(), after the existing array resets (lines 688-691), add:\n\n```bash\n  EXCLUDED_FILES=()\n```\n\nThis must come after UNCHANGED_FILES=() to maintain consistency with the existing pattern. The EXCLUDED_FILES global array must already exist (added by Task 18). This reset ensures that each call to compare_files() starts with a clean exclusion tracking state, which is essential for accurate reporting.",
            "status": "pending",
            "testStrategy": "Test that EXCLUDED_FILES is properly reset between compare_files() calls: 1) Set EXCLUDED_FILES with values, call compare_files(), verify array is reset to empty before processing begins. 2) Run two consecutive compare_files() calls with different exclusion patterns to confirm no state leakage between runs.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Inject Exclusion Check in Staging File Walk (Injection Point 1)",
            "description": "Add exclusion filtering in the staging file walk loop (after line 722 where display_path is constructed) to prevent excluded files from being categorized as ADDED or MODIFIED. Excluded files should be tracked in EXCLUDED_FILES and skipped from further processing.",
            "dependencies": [
              1
            ],
            "details": "In compare_files(), immediately after line 722 `local display_path=\"$project_dir/$relative_path\"` and before line 724 `if [[ ! -f \"$project_file\" ]]`, insert:\n\n```bash\n      # Check exclusion before categorization\n      if is_excluded \"$display_path\"; then\n        EXCLUDED_FILES+=(\"$display_path\")\n        continue\n      fi\n```\n\nThis is the primary injection point that handles files coming from upstream (staging). When a file matches an exclusion pattern, it gets recorded in EXCLUDED_FILES and the loop continues to the next file, preventing any ADDED_FILES or MODIFIED_FILES categorization. The is_excluded() function (from Task 18) uses the display_path which is already in the project-relative format that matches user-specified exclusion patterns.\n<info added on 2026-02-08T13:55:35.341Z>\nI'll analyze the codebase to understand the current implementation and reference the design documentation.Based on my analysis of the design and implementation documentation, here is the reference information to add:\n\n**Design Reference**: See `docs/template-sync/sync-exclusions/design.md` section \"Integration Points in compare_files()\" which specifies two injection points for exclusion checks. This subtask implements Injection Point 1 (lines 105-109 of design.md): \"Staging file walk - After constructing display_path (the project-relative path), before the diff comparison. If is_excluded returns true: append to EXCLUDED_FILES, continue.\"\n\n**Implementation Reference**: See `docs/template-sync/sync-exclusions/implementation.md` Task 5 \"Integrate Exclusions into compare_files()\" which details Injection Point 1 at line 722 (lines 123-131 of implementation.md). The code should be inserted after `local display_path=\"$project_dir/$relative_path\"` and before the `if [[ ! -f \"$project_file\" ]]` check on line 724. This prevents upstream files matching exclusion patterns from being categorized as ADDED or MODIFIED, filtering them before any diff operations occur.\n</info added on 2026-02-08T13:55:35.341Z>",
            "status": "pending",
            "testStrategy": "Integration tests: 1) Create staging with file matching exclusion pattern, empty project dir - verify file appears in EXCLUDED_FILES not ADDED_FILES. 2) Create staging and project with same file (different content) matching exclusion - verify file appears in EXCLUDED_FILES not MODIFIED_FILES. 3) Create staging with file NOT matching exclusion - verify normal ADDED/MODIFIED behavior is preserved.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Inject Exclusion Check in Project File Walk (Injection Point 2) and Update Summary Log",
            "description": "Add exclusion filtering in the project file walk loop (after line 755) to skip excluded files from DELETED detection without double-counting, and update the summary log message to include the excluded file count.",
            "dependencies": [
              1,
              2
            ],
            "details": "Two changes required:\n\n**Change 1**: In compare_files(), immediately after line 755 `local display_path=\"$project_dir/$relative_path\"` and before line 757 `if [[ ! -f \"$staging_file\" ]]`, insert:\n\n```bash\n        # Skip excluded files in deletion detection (don't add to EXCLUDED_FILES to avoid double-counting)\n        if is_excluded \"$display_path\"; then\n          continue\n        fi\n```\n\nNote: This injection point does NOT add to EXCLUDED_FILES array. Files that exist in both staging and project were already recorded during the staging walk. Files that exist only locally (potential deletions) are simply skipped - they weren't from upstream so don't need exclusion tracking.\n\n**Change 2**: Update the summary log on line 765 to include excluded count:\n\n```bash\n  log_success \"Comparison complete: ${#ADDED_FILES[@]} added, ${#MODIFIED_FILES[@]} modified, ${#DELETED_FILES[@]} deleted, ${#UNCHANGED_FILES[@]} unchanged, ${#EXCLUDED_FILES[@]} excluded\"\n```\n<info added on 2026-02-08T13:55:56.790Z>\nI'll analyze the codebase to understand the current implementation and provide specific guidance for this subtask.Based on my analysis of the design document and implementation plan, here is the new text that should be appended to the subtask's details:\n\n**Referenced Design Documentation:**\n- Design at `docs/template-sync/sync-exclusions/design.md` - Integration Points in compare_files() section (lines 101-119): Confirms Injection Point 2 should check exclusion AFTER line 755 `display_path` construction and BEFORE line 757's staging file existence check.\n- Implementation plan at `docs/template-sync/sync-exclusions/implementation.md` - Task 5, Injection Point 2 (lines 132-148): Explicitly recommends NOT adding to EXCLUDED_FILES array at this injection point to avoid double-counting. Files existing in both staging and project are already recorded during the staging walk (Injection Point 1). Files existing only locally (deletion candidates) don't need exclusion tracking since they're not upstream files being excluded.\n\n**Rationale for skipping EXCLUDED_FILES recording at Injection Point 2:**\nThe project file walk only discovers files that exist locally but not upstream (deletion candidates). If such a file matches an exclusion pattern, it means the file was never part of the template sync scope - it's a local-only file. The EXCLUDED_FILES array is meant to track \"upstream files that were excluded from sync,\" not local files. Therefore, at this injection point we simply `continue` without recording to maintain accurate reporting and avoid duplicate counts for files that exist in both locations.\n</info added on 2026-02-08T13:55:56.790Z>",
            "status": "pending",
            "testStrategy": "Tests: 1) Create project with file matching exclusion pattern, staging without it - verify file NOT in DELETED_FILES and loop continues. 2) Verify excluded files are not double-counted: create file in both staging and project matching exclusion - run compare_files() - verify EXCLUDED_FILES count is 1 not 2. 3) Verify summary log output contains 'excluded' count. 4) Full integration: run compare_files() with mix of added, modified, deleted, unchanged, and excluded files - verify all arrays populated correctly and summary accurate.",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T15:09:24.301Z"
      },
      {
        "id": "21",
        "title": "Update Reporting Functions for Excluded Files",
        "description": "Extend generate_diff_report() and generate_markdown_summary() to display excluded files in the sync report, add excluded_count to CI output, and include an 'Excluded Files' section in the PR markdown summary.",
        "details": "**File**: `.github/scripts/template-sync.sh`\n\n**Step 1 - Update generate_diff_report() CI mode output** (lines 793-819):\nAdd to GITHUB_OUTPUT block (after line 804):\n```bash\n        echo \"excluded_count=${#EXCLUDED_FILES[@]}\"\n```\nAdd to stdout block (after line 817):\n```bash\n      echo \"excluded_count=${#EXCLUDED_FILES[@]}\"\n```\n\n**Step 2 - Update summary section** (after line 846 \"Unchanged: ...\"):\n```bash\n  echo -e \"    Excluded:  ${#EXCLUDED_FILES[@]}\"\n```\n\n**Step 3 - Add Excluded files list** (after deleted files section, before line 900 closing separator):\n```bash\n  # List excluded files\n  if [[ ${#EXCLUDED_FILES[@]} -gt 0 ]]; then\n    echo -e \"  ${CYAN}Excluded files (via sync_exclusions):${NC}\"\n    for file in \"${EXCLUDED_FILES[@]}\"; do\n      echo -e \"    ${CYAN}○${NC} $file\"\n    done\n    echo \"\"\n  fi\n```\n\n**Step 4 - Update generate_markdown_summary()** (lines 911-956):\nAdd to table (after line 927 Deleted row):\n```bash\n  echo \"| Excluded | ${#EXCLUDED_FILES[@]} |\"\n```\n\nAdd excluded files section (after deleted files section):\n```bash\n  if [[ ${#EXCLUDED_FILES[@]} -gt 0 ]]; then\n    echo \"### Excluded Files\"\n    echo \"\"\n    echo \"_These files were skipped due to \\`sync_exclusions\\` patterns in the manifest:_\"\n    echo \"\"\n    for file in \"${EXCLUDED_FILES[@]}\"; do\n      echo \"- \\`$file\\`\"\n    done\n    echo \"\"\n  fi\n```\n\n**Key Implementation Notes**:\n- Excluded count does NOT affect has_changes calculation (line 789) - exclusions are intentional, not changes\n- Use CYAN color for excluded files to distinguish from change categories (green=added, yellow=modified, red=deleted)\n- Use ○ (hollow circle) marker to visually distinguish from +, ~, - markers",
        "testStrategy": "Report output tests:\n1. `generate_diff_report` shows excluded count in summary - set EXCLUDED_FILES with entries, verify output contains \"Excluded:\" line\n2. `generate_diff_report` lists excluded files - set EXCLUDED_FILES, verify each file path appears in output\n3. `generate_diff_report` CI mode includes excluded_count - set CI_MODE=true and EXCLUDED_FILES, verify output contains \"excluded_count=N\"\n4. excluded_count does NOT affect has_changes - set only EXCLUDED_FILES (no added/modified/deleted), verify has_changes=false\n5. `generate_markdown_summary` includes excluded files section - call function, verify markdown contains \"Excluded Files\" heading and file list",
        "priority": "medium",
        "dependencies": [
          "20"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add excluded_count to CI mode output in generate_diff_report()",
            "description": "Add excluded_count output variable to both the GITHUB_OUTPUT block and stdout block in the CI mode section of generate_diff_report(), ensuring excluded files are tracked separately from change metrics without affecting has_changes calculation.",
            "dependencies": [],
            "details": "Modify generate_diff_report() in .github/scripts/template-sync.sh:\n\n1. In GITHUB_OUTPUT block (after line 803, before 'diff_summary'):\n   Add: echo \"excluded_count=${#EXCLUDED_FILES[@]}\"\n\n2. In stdout block (after line 817, before '::endgroup::'):\n   Add: echo \"excluded_count=${#EXCLUDED_FILES[@]}\"\n\nIMPORTANT: Do NOT modify total_changes calculation (line 788) or has_changes logic (lines 789-790) - excluded files are intentional user configuration, not sync changes.\n<info added on 2026-02-08T13:56:21.238Z>\nI'll analyze the codebase to understand the current implementation and provide specific, actionable information for this subtask.Based on my analysis of the design document, implementation plan, and current code, here's the information that should be added to subtask 21.2:\n\nDesign reference: docs/template-sync/sync-exclusions/design.md lines 120-134 specifies the \"Report Changes\" section. Human-readable report should add a new \"Excluded (skipped)\" section after the change summary with excluded files listed using a distinct marker. Excluded files do NOT count toward has_changes since they are intentional user configuration.\n\nImplementation reference: docs/template-sync/sync-exclusions/implementation.md Task 6 lines 150-170 provides specific implementation details:\n\n1. Add excluded count to summary section (after line 846, before the Added files section at line 848):\n   ```bash\n   echo -e \"    Excluded:  ${#EXCLUDED_FILES[@]}\"\n   ```\n   Use CYAN color or default/no color to differentiate from change categories.\n\n2. Add excluded files list section after the deleted files section (after line 898, before the closing separator at line 900):\n   ```bash\n   if [[ ${#EXCLUDED_FILES[@]} -gt 0 ]]; then\n     echo -e \"  ${CYAN}Excluded (skipped):${NC}\"\n     for file in \"${EXCLUDED_FILES[@]}\"; do\n       echo -e \"    ${CYAN}⊘${NC} $file\"\n     done\n     echo \"\"\n   fi\n   ```\n   Use a distinct marker like \"⊘\" to differentiate from add (+), modify (~), and delete (-) markers.\n\nFile location: .github/scripts/template-sync.sh lines 841-900 contain the human-readable output section of generate_diff_report().\n</info added on 2026-02-08T13:56:21.238Z>",
            "status": "pending",
            "testStrategy": "1. Set CI_MODE=true and EXCLUDED_FILES=(.claude/test1.md .claude/test2.md)\n2. Call generate_diff_report with mock staging dir\n3. Assert output contains 'excluded_count=2'\n4. Verify has_changes and total_changes remain unaffected by excluded count",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Add excluded files summary and list section to human-readable report",
            "description": "Update the human-readable output section of generate_diff_report() to display excluded file count in the summary and list excluded files in a dedicated section using CYAN color and hollow circle (○) marker.",
            "dependencies": [
              1
            ],
            "details": "Modify generate_diff_report() in .github/scripts/template-sync.sh:\n\n1. Add to summary section (after line 845 'Unchanged:...'):\n   echo -e \"    Excluded:  ${CYAN}${#EXCLUDED_FILES[@]}${NC}\"\n\n2. Add excluded files list section (after deleted files section ~line 898, before line 900 closing separator):\n   if [[ ${#EXCLUDED_FILES[@]} -gt 0 ]]; then\n     echo -e \"  ${CYAN}Excluded files (via sync_exclusions):${NC}\"\n     for file in \"${EXCLUDED_FILES[@]}\"; do\n       echo -e \"    ${CYAN}○${NC} $file\"\n     done\n     echo \"\"\n   fi\n\nUse CYAN color and ○ marker to visually distinguish from +/~/- markers used for added/modified/deleted.",
            "status": "pending",
            "testStrategy": "1. Set EXCLUDED_FILES=(.claude/commands/cove/cove.md .claude/skills/cove/SKILL.md)\n2. Call generate_diff_report in non-CI mode\n3. Verify output contains 'Excluded:  2' in summary section\n4. Verify output contains 'Excluded files (via sync_exclusions):' header\n5. Verify each excluded file appears with ○ marker",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Add Excluded Files section to generate_markdown_summary()",
            "description": "Update generate_markdown_summary() to include excluded files in the summary table and add a dedicated 'Excluded Files' markdown section with explanatory text for the PR body.",
            "dependencies": [
              1
            ],
            "details": "Modify generate_markdown_summary() in .github/scripts/template-sync.sh:\n\n1. Add row to summary table (after line 927 'Deleted' row):\n   echo \"| Excluded | ${#EXCLUDED_FILES[@]} |\"\n\n2. Add excluded files section (after deleted files section ~line 955, before function end):\n   if [[ ${#EXCLUDED_FILES[@]} -gt 0 ]]; then\n     echo \"### Excluded Files\"\n     echo \"\"\n     echo \"_These files were skipped due to \\`sync_exclusions\\` patterns in the manifest:_\"\n     echo \"\"\n     for file in \"${EXCLUDED_FILES[@]}\"; do\n       echo \"- \\`$file\\`\"\n     done\n     echo \"\"\n   fi\n\nThis section provides visibility into which upstream files were intentionally excluded from the sync.\n<info added on 2026-02-08T13:56:35.913Z>\nI'll analyze the codebase to understand the implementation context before generating the subtask update.Based on the implementation plan at docs/template-sync/sync-exclusions/implementation.md, Task 7 specifies the exact changes needed for generate_markdown_summary():\n\n1. Add \"Excluded\" row to summary table after line 927 (after \"Deleted\" row)\n2. Add \"Excluded Files\" section after deleted files section (after line 955, before function end at line 956)\n\nThe implementation details are already provided in the current subtask description. The specific line numbers and code structure match Task 7 in the implementation plan document.\n</info added on 2026-02-08T13:56:35.913Z>",
            "status": "pending",
            "testStrategy": "1. Set EXCLUDED_FILES=(.claude/commands/cove/* .claude/skills/cove/*)\n2. Call generate_markdown_summary with mock staging dir\n3. Verify markdown table contains '| Excluded | 2 |' row\n4. Verify output contains '### Excluded Files' header\n5. Verify explanatory italicized text about sync_exclusions is present\n6. Verify each excluded file is listed with backtick formatting",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T15:27:07.625Z"
      },
      {
        "id": "22",
        "title": "Update Schema Documentation and Create Test Fixture",
        "description": "Update the JSON schema documentation to include the new sync_exclusions field definition, and create a test fixture manifest with exclusion patterns for comprehensive testing.",
        "details": "**File 1**: `docs/template-sync/template-state-schema.json`\n\nAdd sync_exclusions to properties (after line 83, before closing brace of properties object):\n```json\n    \"sync_exclusions\": {\n      \"type\": \"array\",\n      \"description\": \"Optional array of glob patterns for project-relative paths to exclude from template sync. Files matching these patterns will not be added, modified, or flagged as deleted during sync. Patterns use bash case-statement glob syntax where * matches any characters including directory separators.\",\n      \"default\": [],\n      \"items\": {\n        \"type\": \"string\",\n        \"description\": \"Glob pattern for a project-relative path (e.g., '.claude/commands/cove/*')\"\n      },\n      \"examples\": [\n        [],\n        [\".claude/commands/cove/*\"],\n        [\".claude/commands/cove/*\", \".claude/skills/cove/*\", \".taskmaster/templates/example_prd.txt\"]\n      ]\n    }\n```\n\n**Note**: Do NOT add sync_exclusions to \"required\" array (line 7) - the field is optional.\n\n**File 2**: Create `test/fixtures/manifests/valid-manifest-with-exclusions.json`:\n```json\n{\n  \"schema_version\": \"1\",\n  \"upstream_repo\": \"serpro69/claude-starter-kit\",\n  \"template_version\": \"v1.0.0\",\n  \"synced_at\": \"2025-01-27T10:00:00Z\",\n  \"sync_exclusions\": [\n    \".claude/commands/cove/*\",\n    \".claude/skills/cove/*\"\n  ],\n  \"variables\": {\n    \"PROJECT_NAME\": \"my-project\",\n    \"LANGUAGES\": \"typescript\",\n    \"CC_MODEL\": \"sonnet\",\n    \"SERENA_INITIAL_PROMPT\": \"\",\n    \"TM_CUSTOM_SYSTEM_PROMPT\": \"\",\n    \"TM_APPEND_SYSTEM_PROMPT\": \"\",\n    \"TM_PERMISSION_MODE\": \"default\"\n  }\n}\n```\n\n**Key Implementation Notes**:\n- Schema uses additionalProperties: false, so sync_exclusions MUST be added to properties for manifests with this field to validate\n- Pattern examples show common use cases: directory wildcards, multiple patterns\n- Test fixture provides realistic patterns for cove skill exclusion (a likely real-world use case)",
        "testStrategy": "Schema and fixture validation:\n1. Validate the updated schema is valid JSON Schema draft-07 syntax\n2. Validate valid-manifest-with-exclusions.json passes jq syntax check\n3. Verify the fixture can be loaded by read_manifest() without error\n4. Verify the fixture passes validate_manifest() without error\n5. Verify SYNC_EXCLUSIONS array contains exactly 2 patterns after loading fixture",
        "priority": "medium",
        "dependencies": [
          "19"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add sync_exclusions property to JSON Schema documentation",
            "description": "Update the template-state-schema.json file to add the sync_exclusions field definition in the properties object, documenting it as an optional array of glob patterns for excluding files from template sync.",
            "dependencies": [],
            "details": "Edit `docs/template-sync/template-state-schema.json` to add the `sync_exclusions` property after line 83 (after the closing brace of `variables` property, before the closing brace of `properties` object). The property definition should include: type 'array', description explaining glob patterns for project-relative paths using bash case-statement syntax, default value of empty array [], items type 'string' with description, and examples array showing common patterns like empty array, single pattern, and multiple patterns. Do NOT add sync_exclusions to the 'required' array on line 7 - the field is optional. This is critical because the schema uses additionalProperties: false, so the field MUST be in properties for manifests with this field to pass validation.\n<info added on 2026-02-08T13:57:01.833Z>\nI'll analyze the codebase to understand the context and provide an accurate subtask update.Based on my analysis of the codebase, here's the subtask update:\n\nThe fixture should be created at `test/fixtures/manifests/valid-manifest-with-exclusions.json` following the structure in `valid-manifest.json` but with a `sync_exclusions` array added. Per the implementation plan (Task 9, lines 209-215), the fixture should contain 2-3 example patterns like `.claude/commands/cove/*` and `.claude/skills/cove/*`. This mirrors the schema specification from Task 8 (lines 192-206) where sync_exclusions is defined as an optional array of string glob patterns for project-relative paths. The fixture will be used to test exclusion loading in `read_manifest()`, validation in `validate_manifest()`, and file filtering in `compare_files()` as described in the test plan (Task 10, lines 220-289).\n</info added on 2026-02-08T13:57:01.833Z>",
            "status": "pending",
            "testStrategy": "Validate the updated schema is valid JSON Schema draft-07 syntax using a JSON linter. Verify the schema file parses correctly with jq. Confirm sync_exclusions is present in properties but not in required array. Test that a manifest with sync_exclusions validates against the schema while a manifest with an unknown field still fails.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Create test fixture manifest with sync exclusions patterns",
            "description": "Create a new test fixture file valid-manifest-with-exclusions.json that contains a complete manifest with realistic sync_exclusions patterns for testing the exclusion functionality.",
            "dependencies": [
              1
            ],
            "details": "Create `test/fixtures/manifests/valid-manifest-with-exclusions.json` based on the existing `valid-manifest.json` structure. The fixture should include all required fields (schema_version: '1', upstream_repo: 'serpro69/claude-starter-kit', template_version: 'v1.0.0', synced_at: '2025-01-27T10:00:00Z', variables object with all fields) plus a sync_exclusions array containing realistic patterns like ['.claude/commands/cove/*', '.claude/skills/cove/*']. These patterns represent a common real-world use case where users have deleted the cove skill files and want to prevent sync from re-adding them.",
            "status": "pending",
            "testStrategy": "Validate the fixture is valid JSON using jq syntax check (jq . < file.json). Verify the fixture can be loaded by the read_manifest() function without error. Confirm the fixture passes validate_manifest() validation. Check that the sync_exclusions array contains the expected number of patterns and pattern values.",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T15:32:47.895Z"
      },
      {
        "id": "23",
        "title": "Update User Documentation (README, CLAUDE.md, design.md)",
        "description": "Add comprehensive user documentation for the sync exclusions feature including usage examples in README.md, brief mention in CLAUDE.md, and update the template-sync design document to reference the new file classification category.",
        "details": "**File 1**: `README.md` - Add after the \"What's Preserved\" section (around line 224-236):\n\n```markdown\n### Configuring Sync Exclusions\n\nIf you've deleted template files that you don't need (e.g., specific skills or commands), you can prevent sync from re-adding them by configuring exclusion patterns in your manifest.\n\nEdit `.github/template-state.json` and add a `sync_exclusions` array:\n\n```json\n{\n  \"schema_version\": \"1\",\n  \"upstream_repo\": \"serpro69/claude-starter-kit\",\n  \"template_version\": \"v0.2.0\",\n  \"synced_at\": \"2025-01-27T10:00:00Z\",\n  \"sync_exclusions\": [\n    \".claude/commands/cove/*\",\n    \".claude/skills/cove/*\"\n  ],\n  \"variables\": { ... }\n}\n```\n\n**Pattern syntax**:\n- Patterns use glob syntax where `*` matches any characters including directory separators\n- Patterns are matched against project-relative paths (e.g., `.claude/commands/cove/cove.md`)\n- Common patterns: `.claude/commands/cove/*` (entire directory), `.taskmaster/templates/example_prd.txt` (single file)\n\n**Behavior**:\n- Excluded files are NOT added if they exist upstream but not locally\n- Excluded files are NOT updated if they exist in both places\n- Excluded files are NOT flagged as deleted if they exist locally but not upstream\n- Excluded files appear as \"Excluded\" in the sync report for transparency\n```\n\n**File 2**: `CLAUDE.md` - Update the Template Sync section (around line 201-210) to mention:\n\n```markdown\n### Sync Exclusions\n- Users can add `sync_exclusions` array to `.github/template-state.json` to prevent specific paths from being synced\n- Patterns use glob syntax (e.g., `.claude/commands/cove/*`)\n- See README.md \"Configuring Sync Exclusions\" section for details\n```\n\n**File 3**: `docs/template-sync/design.md` - Update in two places:\n1. Add to File Classification table (around line 150):\n```markdown\n| User-excluded | Ignored by sync | Manifest `sync_exclusions` |\n```\n\n2. Update Limitations section (around line 271) to note that sync exclusions now allow selective file exclusion, referencing `docs/template-sync/sync-exclusions/design.md` for full details.\n\n**Key Implementation Notes**:\n- Keep README documentation concise but complete with examples\n- CLAUDE.md just needs a brief pointer since it's auto-loaded context\n- Design doc update maintains consistency with existing documentation structure",
        "testStrategy": "Documentation validation:\n1. Verify README.md changes render correctly as markdown (no syntax errors)\n2. Verify CLAUDE.md changes don't break existing section structure\n3. Verify design.md file classification table is properly formatted\n4. Test that example JSON in README is valid JSON syntax\n5. Ensure all cross-references between documents are accurate (paths, section names)",
        "priority": "low",
        "dependencies": [
          "21",
          "22"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Add Sync Exclusions Documentation to README.md",
            "description": "Add comprehensive documentation for the sync exclusions feature to README.md, including configuration examples, pattern syntax, and behavior explanation.",
            "dependencies": [],
            "details": "Add a new subsection '### Configuring Sync Exclusions' after the 'What's Preserved' section (around line 236). Include: (1) Introduction explaining when/why to use exclusions, (2) Example manifest JSON showing sync_exclusions array with patterns like '.claude/commands/cove/*' and '.claude/skills/cove/*', (3) Pattern syntax documentation explaining glob syntax where '*' matches any characters including directory separators, patterns are matched against project-relative paths, and common pattern examples, (4) Behavior section explaining: excluded files are NOT added if upstream-only, NOT updated if in both places, NOT flagged as deleted if local-only, and appear as 'Excluded' in sync report for transparency.\n<info added on 2026-02-08T13:57:34.946Z>\nI'll analyze the codebase to understand the current structure and then generate the appropriate subtask update.Now let me check the current README.md structure to understand the Task 11 changes for context:Now let me look at the current CLAUDE.md Template Sync section to understand the structure better:Perfect! Now I have all the context I need. Let me generate the subtask update text:\n\nThe implementation plan at docs/template-sync/sync-exclusions/implementation.md provides comprehensive step-by-step guidance for all tasks (see Task 11 for README documentation strategy around line 298-304). The design document at docs/template-sync/sync-exclusions/design.md contains the manifest schema example showing the sync_exclusions field structure (lines 52-65): it's an optional top-level array of strings placed alongside variables, with patterns like '.claude/commands/cove/*' and '.claude/skills/cove/*'. Pattern syntax is explained in the design doc (lines 70-86): bash case statement globs where * matches any characters including directory separators, matched against project-relative paths. File classification update for the design.md reference is at design doc lines 154-162, showing the new 'User-excluded' category controlled by manifest sync_exclusions. For CLAUDE.md placement, the Template Sync section exists at lines 172-178 and should have the exclusions subsection added after 'What's Preserved' discussion (matching README structure which has 'What's Preserved' at line 231-235).\n</info added on 2026-02-08T13:57:34.946Z>",
            "status": "pending",
            "testStrategy": "Verify README.md renders correctly as markdown without syntax errors. Validate the example JSON is syntactically correct using jq. Ensure the new section appears logically after 'What's Preserved' and maintains consistent formatting with existing README sections.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Add Sync Exclusions Mention to CLAUDE.md Template Sync Section",
            "description": "Update the Template Sync section in CLAUDE.md to briefly mention the sync exclusions feature and point users to README for detailed documentation.",
            "dependencies": [
              1
            ],
            "details": "Update the '### Template Sync' section (lines 172-179 in CLAUDE.md) to add a brief subsection about sync exclusions. Add after line 178 ('Sync infrastructure (workflow and script) are also updated when upstream has changes'): a new subsection '### Sync Exclusions' with 3-4 bullet points: (1) Users can add `sync_exclusions` array to `.github/template-state.json` to prevent specific paths from being synced, (2) Patterns use glob syntax (e.g., `.claude/commands/cove/*`), (3) See README.md 'Configuring Sync Exclusions' section for details. Keep this brief since CLAUDE.md is auto-loaded context and users should reference README for full documentation.",
            "status": "pending",
            "testStrategy": "Verify CLAUDE.md changes don't break existing section structure. Ensure the new section maintains consistent markdown formatting with existing sections. Verify the reference to README.md is accurate.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Update Template Sync Design Document with Exclusion Category",
            "description": "Update docs/template-sync/design.md to add the 'User-excluded' file classification category and update the Limitations section to reference sync exclusions.",
            "dependencies": [
              1
            ],
            "details": "Make two updates to docs/template-sync/design.md: (1) In the 'File Classification' section (around line 200), add a new category 'User-excluded' between 'User-Scoped Files' and 'Project-Specific Files'. Include a brief description explaining these are files matching patterns in manifest `sync_exclusions` that are ignored by sync. Add a table row or bullet point listing the classification behavior. (2) In the 'Limitations' section (line 271-277), update item 1 'All-or-nothing updates' to note that sync exclusions now allow selective file exclusion. Change the limitation text to acknowledge this is partially addressed and add a reference to `docs/template-sync/sync-exclusions/design.md` for full details on the exclusion feature.",
            "status": "pending",
            "testStrategy": "Verify the File Classification section maintains proper markdown table formatting if a table is used. Ensure the Limitations section update is accurate and the reference to sync-exclusions design doc uses the correct path. Validate overall document structure remains consistent.",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2026-02-08T15:35:42.905Z"
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2026-02-08T15:35:42.906Z",
      "taskCount": 15,
      "completedCount": 15,
      "tags": [
        "master"
      ]
    }
  }
}